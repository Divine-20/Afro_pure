"use strict";exports.id=524,exports.ids=[524],exports.modules={3524:(h,c,g)=>{g.r(c),g.d(c,{AElement:()=>AElement,AnimateColorElement:()=>AnimateColorElement,AnimateElement:()=>AnimateElement,AnimateTransformElement:()=>AnimateTransformElement,BoundingBox:()=>BoundingBox,CB1:()=>CB1,CB2:()=>CB2,CB3:()=>CB3,CB4:()=>CB4,Canvg:()=>Canvg,CircleElement:()=>CircleElement,ClipPathElement:()=>ClipPathElement,DefsElement:()=>DefsElement,DescElement:()=>DescElement,Document:()=>Document,Element:()=>Element,EllipseElement:()=>EllipseElement,FeColorMatrixElement:()=>FeColorMatrixElement,FeCompositeElement:()=>FeCompositeElement,FeDropShadowElement:()=>FeDropShadowElement,FeGaussianBlurElement:()=>FeGaussianBlurElement,FeMorphologyElement:()=>FeMorphologyElement,FilterElement:()=>FilterElement,Font:()=>Font,FontElement:()=>FontElement,FontFaceElement:()=>FontFaceElement,GElement:()=>GElement,GlyphElement:()=>GlyphElement,GradientElement:()=>GradientElement,ImageElement:()=>ImageElement,LineElement:()=>LineElement,LinearGradientElement:()=>LinearGradientElement,MarkerElement:()=>MarkerElement,MaskElement:()=>MaskElement,Matrix:()=>Matrix,MissingGlyphElement:()=>MissingGlyphElement,Mouse:()=>Mouse,PSEUDO_ZERO:()=>U,Parser:()=>Parser,PathElement:()=>PathElement,PathParser:()=>PathParser,PatternElement:()=>PatternElement,Point:()=>Point,PolygonElement:()=>PolygonElement,PolylineElement:()=>PolylineElement,Property:()=>Property,QB1:()=>QB1,QB2:()=>QB2,QB3:()=>QB3,RadialGradientElement:()=>RadialGradientElement,RectElement:()=>RectElement,RenderedElement:()=>RenderedElement,Rotate:()=>Rotate,SVGElement:()=>SVGElement,SVGFontLoader:()=>SVGFontLoader,Scale:()=>Scale,Screen:()=>Screen,Skew:()=>Skew,SkewX:()=>SkewX,SkewY:()=>SkewY,StopElement:()=>StopElement,StyleElement:()=>StyleElement,SymbolElement:()=>SymbolElement,TRefElement:()=>TRefElement,TSpanElement:()=>TSpanElement,TextElement:()=>TextElement,TextPathElement:()=>TextPathElement,TitleElement:()=>TitleElement,Transform:()=>Transform,Translate:()=>Translate,UnknownElement:()=>UnknownElement,UseElement:()=>UseElement,ViewPort:()=>ViewPort,compressSpaces:()=>compressSpaces,default:()=>Canvg,getSelectorSpecificity:()=>getSelectorSpecificity,normalizeAttributeName:()=>normalizeAttributeName,normalizeColor:()=>normalizeColor,parseExternalUrl:()=>parseExternalUrl,presets:()=>_,toNumbers:()=>toNumbers,trimLeft:()=>trimLeft,trimRight:()=>trimRight,vectorMagnitude:()=>vectorMagnitude,vectorsAngle:()=>vectorsAngle,vectorsRatio:()=>vectorsRatio}),g(37325);var d=g(82510);g(17952),g(12084),g(37326),g(82100),g(55917);var f=g(513);g(29561),g(97877),g(38288);var x=g(62783);g(69374);var E=g(76049);g(48297),g(52476),g(11129);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(h,c){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(h[g]=c[g])})(h,c)};function r(h,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function i(){this.constructor=h}t(h,c),h.prototype=null===c?Object.create(c):(i.prototype=c.prototype,new i)}function e(h){var c="";Array.isArray(h)||(h=[h]);for(var g=0;g<h.length;g++){var d=h[g];if(d.type===w.CLOSE_PATH)c+="z";else if(d.type===w.HORIZ_LINE_TO)c+=(d.relative?"h":"H")+d.x;else if(d.type===w.VERT_LINE_TO)c+=(d.relative?"v":"V")+d.y;else if(d.type===w.MOVE_TO)c+=(d.relative?"m":"M")+d.x+" "+d.y;else if(d.type===w.LINE_TO)c+=(d.relative?"l":"L")+d.x+" "+d.y;else if(d.type===w.CURVE_TO)c+=(d.relative?"c":"C")+d.x1+" "+d.y1+" "+d.x2+" "+d.y2+" "+d.x+" "+d.y;else if(d.type===w.SMOOTH_CURVE_TO)c+=(d.relative?"s":"S")+d.x2+" "+d.y2+" "+d.x+" "+d.y;else if(d.type===w.QUAD_TO)c+=(d.relative?"q":"Q")+d.x1+" "+d.y1+" "+d.x+" "+d.y;else if(d.type===w.SMOOTH_QUAD_TO)c+=(d.relative?"t":"T")+d.x+" "+d.y;else{if(d.type!==w.ARC)throw Error('Unexpected command type "'+d.type+'" at index '+g+".");c+=(d.relative?"a":"A")+d.rX+" "+d.rY+" "+d.xRot+" "+ +d.lArcFlag+" "+ +d.sweepFlag+" "+d.x+" "+d.y}}return c}function i(h,c){var g=h[0],d=h[1];return[g*Math.cos(c)-d*Math.sin(c),g*Math.sin(c)+d*Math.cos(c)]}function a(){for(var h=[],c=0;c<arguments.length;c++)h[c]=arguments[c];for(var g=0;g<h.length;g++)if("number"!=typeof h[g])throw Error("assertNumbers arguments["+g+"] is not a number. "+typeof h[g]+" == typeof "+h[g]);return!0}var P=Math.PI;function o(h,c,g){h.lArcFlag=0===h.lArcFlag?0:1,h.sweepFlag=0===h.sweepFlag?0:1;var d=h.rX,f=h.rY,x=h.x,E=h.y;d=Math.abs(h.rX),f=Math.abs(h.rY);var b=i([(c-x)/2,(g-E)/2],-h.xRot/180*P),S=b[0],T=b[1],C=Math.pow(S,2)/Math.pow(d,2)+Math.pow(T,2)/Math.pow(f,2);1<C&&(d*=Math.sqrt(C),f*=Math.sqrt(C)),h.rX=d,h.rY=f;var A=Math.pow(d,2)*Math.pow(T,2)+Math.pow(f,2)*Math.pow(S,2),w=(h.lArcFlag!==h.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(d,2)*Math.pow(f,2)-A)/A)),M=d*T/f*w,N=-f*S/d*w,_=i([M,N],h.xRot/180*P);h.cX=_[0]+(c+x)/2,h.cY=_[1]+(g+E)/2,h.phi1=Math.atan2((T-N)/f,(S-M)/d),h.phi2=Math.atan2((-T-N)/f,(-S-M)/d),0===h.sweepFlag&&h.phi2>h.phi1&&(h.phi2-=2*P),1===h.sweepFlag&&h.phi2<h.phi1&&(h.phi2+=2*P),h.phi1*=180/P,h.phi2*=180/P}function s(h,c,g){a(h,c,g);var d=h*h+c*c-g*g;if(0>d)return[];if(0===d)return[[h*g/(h*h+c*c),c*g/(h*h+c*c)]];var f=Math.sqrt(d);return[[(h*g+c*f)/(h*h+c*c),(c*g-h*f)/(h*h+c*c)],[(h*g-c*f)/(h*h+c*c),(c*g+h*f)/(h*h+c*c)]]}var b,S=Math.PI/180;function y(h,c,g,d){return h+Math.cos(d/180*P)*c+Math.sin(d/180*P)*g}function p(h,c,g,d){var f=c-h,x=g-c,E=3*f+3*(d-g)-6*x,P=6*(x-f),b=3*f;return 1e-6>Math.abs(E)?[-b/P]:function(h,c,g){void 0===g&&(g=1e-6);var d=h*h/4-c;if(d<-g)return[];if(d<=g)return[-h/2];var f=Math.sqrt(d);return[-h/2-f,-h/2+f]}(P/E,b/E,1e-6)}function m(h,c,g,d,f){var x=1-f;return h*(x*x*x)+c*(3*x*x*f)+g*(3*x*f*f)+d*(f*f*f)}!function(h){function r(){return u(function(h,c,g){return h.relative&&(void 0!==h.x1&&(h.x1+=c),void 0!==h.y1&&(h.y1+=g),void 0!==h.x2&&(h.x2+=c),void 0!==h.y2&&(h.y2+=g),void 0!==h.x&&(h.x+=c),void 0!==h.y&&(h.y+=g),h.relative=!1),h})}function e(){var h=NaN,c=NaN,g=NaN,d=NaN;return u(function(f,x,E){return f.type&w.SMOOTH_CURVE_TO&&(f.type=w.CURVE_TO,h=isNaN(h)?x:h,c=isNaN(c)?E:c,f.x1=f.relative?x-h:2*x-h,f.y1=f.relative?E-c:2*E-c),f.type&w.CURVE_TO?(h=f.relative?x+f.x2:f.x2,c=f.relative?E+f.y2:f.y2):(h=NaN,c=NaN),f.type&w.SMOOTH_QUAD_TO&&(f.type=w.QUAD_TO,g=isNaN(g)?x:g,d=isNaN(d)?E:d,f.x1=f.relative?x-g:2*x-g,f.y1=f.relative?E-d:2*E-d),f.type&w.QUAD_TO?(g=f.relative?x+f.x1:f.x1,d=f.relative?E+f.y1:f.y1):(g=NaN,d=NaN),f})}function n(){var h=NaN,c=NaN;return u(function(g,d,f){if(g.type&w.SMOOTH_QUAD_TO&&(g.type=w.QUAD_TO,h=isNaN(h)?d:h,c=isNaN(c)?f:c,g.x1=g.relative?d-h:2*d-h,g.y1=g.relative?f-c:2*f-c),g.type&w.QUAD_TO){h=g.relative?d+g.x1:g.x1,c=g.relative?f+g.y1:g.y1;var x=g.x1,E=g.y1;g.type=w.CURVE_TO,g.x1=((g.relative?0:d)+2*x)/3,g.y1=((g.relative?0:f)+2*E)/3,g.x2=(g.x+2*x)/3,g.y2=(g.y+2*E)/3}else h=NaN,c=NaN;return g})}function u(h){var c=0,g=0,d=NaN,f=NaN;return function(x){if(isNaN(d)&&!(x.type&w.MOVE_TO))throw Error("path must start with moveto");var E=h(x,c,g,d,f);return x.type&w.CLOSE_PATH&&(c=d,g=f),void 0!==x.x&&(c=x.relative?c+x.x:x.x),void 0!==x.y&&(g=x.relative?g+x.y:x.y),x.type&w.MOVE_TO&&(d=c,f=g),E}}function O(h,c,g,d,f,x){return a(h,c,g,d,f,x),u(function(E,P,b,S){var T=E.x1,C=E.x2,A=E.relative&&!isNaN(S),M=void 0!==E.x?E.x:A?0:P,N=void 0!==E.y?E.y:A?0:b;E.type&w.HORIZ_LINE_TO&&0!==c&&(E.type=w.LINE_TO,E.y=E.relative?0:b),E.type&w.VERT_LINE_TO&&0!==g&&(E.type=w.LINE_TO,E.x=E.relative?0:P),void 0!==E.x&&(E.x=E.x*h+N*g+(A?0:f)),void 0!==E.y&&(E.y=M*c+E.y*d+(A?0:x)),void 0!==E.x1&&(E.x1=E.x1*h+E.y1*g+(A?0:f)),void 0!==E.y1&&(E.y1=T*c+E.y1*d+(A?0:x)),void 0!==E.x2&&(E.x2=E.x2*h+E.y2*g+(A?0:f)),void 0!==E.y2&&(E.y2=C*c+E.y2*d+(A?0:x));var _=h*d-c*g;if(void 0!==E.xRot&&(1!==h||0!==c||0!==g||1!==d)){if(0===_)delete E.rX,delete E.rY,delete E.xRot,delete E.lArcFlag,delete E.sweepFlag,E.type=w.LINE_TO;else{var V,R,k=E.xRot*Math.PI/180,L=Math.sin(k),B=Math.cos(k),D=1/((V=E.rX)*V),F=1/((R=E.rY)*R),z=B*B*D+L*L*F,U=2*L*B*(D-F),X=L*L*D+B*B*F,Y=z*d*d-U*c*d+X*c*c,j=U*(h*d+c*g)-2*(z*g*d+X*h*c),G=z*g*g-U*h*g+X*h*h,Q=(Math.atan2(j,Y-G)+Math.PI)%Math.PI/2,W=Math.sin(Q),q=Math.cos(Q);E.rX=Math.abs(_)/Math.sqrt(Y*(q*q)+j*W*q+G*(W*W)),E.rY=Math.abs(_)/Math.sqrt(Y*(W*W)-j*W*q+G*(q*q)),E.xRot=180*Q/Math.PI}}return void 0!==E.sweepFlag&&0>_&&(E.sweepFlag=+!E.sweepFlag),E})}function l(){return function(h){var c={};for(var g in h)c[g]=h[g];return c}}h.ROUND=function(h){function r(c){return Math.round(c*h)/h}return void 0===h&&(h=1e13),a(h),function(h){return void 0!==h.x1&&(h.x1=r(h.x1)),void 0!==h.y1&&(h.y1=r(h.y1)),void 0!==h.x2&&(h.x2=r(h.x2)),void 0!==h.y2&&(h.y2=r(h.y2)),void 0!==h.x&&(h.x=r(h.x)),void 0!==h.y&&(h.y=r(h.y)),void 0!==h.rX&&(h.rX=r(h.rX)),void 0!==h.rY&&(h.rY=r(h.rY)),h}},h.TO_ABS=r,h.TO_REL=function(){return u(function(h,c,g){return h.relative||(void 0!==h.x1&&(h.x1-=c),void 0!==h.y1&&(h.y1-=g),void 0!==h.x2&&(h.x2-=c),void 0!==h.y2&&(h.y2-=g),void 0!==h.x&&(h.x-=c),void 0!==h.y&&(h.y-=g),h.relative=!0),h})},h.NORMALIZE_HVZ=function(h,c,g){return void 0===h&&(h=!0),void 0===c&&(c=!0),void 0===g&&(g=!0),u(function(d,f,x,E,P){if(isNaN(E)&&!(d.type&w.MOVE_TO))throw Error("path must start with moveto");return c&&d.type&w.HORIZ_LINE_TO&&(d.type=w.LINE_TO,d.y=d.relative?0:x),g&&d.type&w.VERT_LINE_TO&&(d.type=w.LINE_TO,d.x=d.relative?0:f),h&&d.type&w.CLOSE_PATH&&(d.type=w.LINE_TO,d.x=d.relative?E-f:E,d.y=d.relative?P-x:P),d.type&w.ARC&&(0===d.rX||0===d.rY)&&(d.type=w.LINE_TO,delete d.rX,delete d.rY,delete d.xRot,delete d.lArcFlag,delete d.sweepFlag),d})},h.NORMALIZE_ST=e,h.QT_TO_C=n,h.INFO=u,h.SANITIZE=function(h){void 0===h&&(h=0),a(h);var c=NaN,g=NaN,d=NaN,f=NaN;return u(function(x,E,P,b,S){var T=Math.abs,C=!1,A=0,M=0;if(x.type&w.SMOOTH_CURVE_TO&&(A=isNaN(c)?0:E-c,M=isNaN(g)?0:P-g),x.type&(w.CURVE_TO|w.SMOOTH_CURVE_TO)?(c=x.relative?E+x.x2:x.x2,g=x.relative?P+x.y2:x.y2):(c=NaN,g=NaN),x.type&w.SMOOTH_QUAD_TO?(d=isNaN(d)?E:2*E-d,f=isNaN(f)?P:2*P-f):x.type&w.QUAD_TO?(d=x.relative?E+x.x1:x.x1,f=x.relative?P+x.y1:x.y2):(d=NaN,f=NaN),x.type&w.LINE_COMMANDS||x.type&w.ARC&&(0===x.rX||0===x.rY||!x.lArcFlag)||x.type&w.CURVE_TO||x.type&w.SMOOTH_CURVE_TO||x.type&w.QUAD_TO||x.type&w.SMOOTH_QUAD_TO){var N=void 0===x.x?0:x.relative?x.x:x.x-E,_=void 0===x.y?0:x.relative?x.y:x.y-P;A=isNaN(d)?void 0===x.x1?A:x.relative?x.x:x.x1-E:d-E,M=isNaN(f)?void 0===x.y1?M:x.relative?x.y:x.y1-P:f-P;var V=void 0===x.x2?0:x.relative?x.x:x.x2-E,R=void 0===x.y2?0:x.relative?x.y:x.y2-P;T(N)<=h&&T(_)<=h&&T(A)<=h&&T(M)<=h&&T(V)<=h&&T(R)<=h&&(C=!0)}return x.type&w.CLOSE_PATH&&T(E-b)<=h&&T(P-S)<=h&&(C=!0),C?[]:x})},h.MATRIX=O,h.ROTATE=function(h,c,g){void 0===c&&(c=0),void 0===g&&(g=0),a(h,c,g);var d=Math.sin(h),f=Math.cos(h);return O(f,d,-d,f,c-c*f+g*d,g-c*d-g*f)},h.TRANSLATE=function(h,c){return void 0===c&&(c=0),a(h,c),O(1,0,0,1,h,c)},h.SCALE=function(h,c){return void 0===c&&(c=h),a(h,c),O(h,0,0,c,0,0)},h.SKEW_X=function(h){return a(h),O(1,0,Math.atan(h),1,0,0)},h.SKEW_Y=function(h){return a(h),O(1,Math.atan(h),0,1,0,0)},h.X_AXIS_SYMMETRY=function(h){return void 0===h&&(h=0),a(h),O(-1,0,0,1,h,0)},h.Y_AXIS_SYMMETRY=function(h){return void 0===h&&(h=0),a(h),O(1,0,0,-1,0,h)},h.A_TO_C=function(){return u(function(h,c,g){return w.ARC===h.type?function(h,c,g){var d,f,x,E;h.cX||o(h,c,g);for(var P=Math.min(h.phi1,h.phi2),b=Math.max(h.phi1,h.phi2)-P,T=Math.ceil(b/90),C=Array(T),A=c,M=g,N=0;N<T;N++){var _,V,R,k,L,B,D=(_=h.phi1,V=h.phi2,(1-(R=N/T))*_+R*V),F=(k=h.phi1,L=h.phi2,(1-(B=(N+1)/T))*k+B*L),z=4/3*Math.tan((F-D)*S/4),U=[Math.cos(D*S)-z*Math.sin(D*S),Math.sin(D*S)+z*Math.cos(D*S)],X=U[0],Y=U[1],j=[Math.cos(F*S),Math.sin(F*S)],G=j[0],Q=j[1],W=[G+z*Math.sin(F*S),Q-z*Math.cos(F*S)],q=W[0],$=W[1];C[N]={relative:h.relative,type:w.CURVE_TO};var H=function(c,g){var d=i([c*h.rX,g*h.rY],h.xRot),f=d[0],x=d[1];return[h.cX+f,h.cY+x]};d=H(X,Y),C[N].x1=d[0],C[N].y1=d[1],f=H(q,$),C[N].x2=f[0],C[N].y2=f[1],x=H(G,Q),C[N].x=x[0],C[N].y=x[1],h.relative&&(C[N].x1-=A,C[N].y1-=M,C[N].x2-=A,C[N].y2-=M,C[N].x-=A,C[N].y-=M),A=(E=[C[N].x,C[N].y])[0],M=E[1]}return C}(h,h.relative?0:c,h.relative?0:g):h})},h.ANNOTATE_ARCS=function(){return u(function(h,c,g){return h.relative&&(c=0,g=0),w.ARC===h.type&&o(h,c,g),h})},h.CLONE=l,h.CALCULATE_BOUNDS=function(){var t=function(h){var c={};for(var g in h)c[g]=h[g];return c},h=r(),c=n(),g=e(),d=u(function(f,x,E){var P=g(c(h(t(f))));function O(h){h>d.maxX&&(d.maxX=h),h<d.minX&&(d.minX=h)}function l(h){h>d.maxY&&(d.maxY=h),h<d.minY&&(d.minY=h)}if(P.type&w.DRAWING_COMMANDS&&(O(x),l(E)),P.type&w.HORIZ_LINE_TO&&O(P.x),P.type&w.VERT_LINE_TO&&l(P.y),P.type&w.LINE_TO&&(O(P.x),l(P.y)),P.type&w.CURVE_TO){O(P.x),l(P.y);for(var b=0,S=p(x,P.x1,P.x2,P.x);b<S.length;b++)0<(A=S[b])&&1>A&&O(m(x,P.x1,P.x2,P.x,A));for(var T=0,C=p(E,P.y1,P.y2,P.y);T<C.length;T++)0<(A=C[T])&&1>A&&l(m(E,P.y1,P.y2,P.y,A))}if(P.type&w.ARC){O(P.x),l(P.y),o(P,x,E);for(var A,M=P.xRot/180*Math.PI,N=Math.cos(M)*P.rX,_=Math.sin(M)*P.rX,V=-Math.sin(M)*P.rY,R=Math.cos(M)*P.rY,k=P.phi1<P.phi2?[P.phi1,P.phi2]:-180>P.phi2?[P.phi2+360,P.phi1+360]:[P.phi2,P.phi1],L=k[0],B=k[1],I=function(h){var c=h[0],g=180*Math.atan2(h[1],c)/Math.PI;return g<L?g+360:g},D=0,F=s(V,-N,0).map(I);D<F.length;D++)(A=F[D])>L&&A<B&&O(y(P.cX,N,V,A));for(var z=0,U=s(R,-_,0).map(I);z<U.length;z++)(A=U[z])>L&&A<B&&l(y(P.cY,_,R,A))}return f});return d.minX=1/0,d.maxX=-1/0,d.minY=1/0,d.maxY=-1/0,d}}(b||(b={}));var T,C=function(){function t(){}return t.prototype.round=function(h){return this.transform(b.ROUND(h))},t.prototype.toAbs=function(){return this.transform(b.TO_ABS())},t.prototype.toRel=function(){return this.transform(b.TO_REL())},t.prototype.normalizeHVZ=function(h,c,g){return this.transform(b.NORMALIZE_HVZ(h,c,g))},t.prototype.normalizeST=function(){return this.transform(b.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(b.QT_TO_C())},t.prototype.aToC=function(){return this.transform(b.A_TO_C())},t.prototype.sanitize=function(h){return this.transform(b.SANITIZE(h))},t.prototype.translate=function(h,c){return this.transform(b.TRANSLATE(h,c))},t.prototype.scale=function(h,c){return this.transform(b.SCALE(h,c))},t.prototype.rotate=function(h,c,g){return this.transform(b.ROTATE(h,c,g))},t.prototype.matrix=function(h,c,g,d,f,x){return this.transform(b.MATRIX(h,c,g,d,f,x))},t.prototype.skewX=function(h){return this.transform(b.SKEW_X(h))},t.prototype.skewY=function(h){return this.transform(b.SKEW_Y(h))},t.prototype.xSymmetry=function(h){return this.transform(b.X_AXIS_SYMMETRY(h))},t.prototype.ySymmetry=function(h){return this.transform(b.Y_AXIS_SYMMETRY(h))},t.prototype.annotateArcs=function(){return this.transform(b.ANNOTATE_ARCS())},t}(),v=function(h){return 48<=h.charCodeAt(0)&&57>=h.charCodeAt(0)},A=function(h){function e(){var c=h.call(this)||this;return c.curNumber="",c.curCommandType=-1,c.curCommandRelative=!1,c.canParseCommandOrComma=!0,c.curNumberHasExp=!1,c.curNumberHasExpDigits=!1,c.curNumberHasDecimal=!1,c.curArgs=[],c}return r(e,h),e.prototype.finish=function(h){if(void 0===h&&(h=[]),this.parse(" ",h),0!==this.curArgs.length||!this.canParseCommandOrComma)throw SyntaxError("Unterminated command at the path end.");return h},e.prototype.parse=function(h,c){var g=this;void 0===c&&(c=[]);for(var i=function(h){c.push(h),g.curArgs.length=0,g.canParseCommandOrComma=!0},d=0;d<h.length;d++){var f=h[d],x=!(this.curCommandType!==w.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),E=v(f)&&("0"===this.curNumber&&"0"===f||x);if(!v(f)||E){if("e"!==f&&"E"!==f){if("-"!==f&&"+"!==f||!this.curNumberHasExp||this.curNumberHasExpDigits){if("."!==f||this.curNumberHasExp||this.curNumberHasDecimal||x){if(this.curNumber&&-1!==this.curCommandType){var P=Number(this.curNumber);if(isNaN(P))throw SyntaxError("Invalid number ending at "+d);if(this.curCommandType===w.ARC){if(0===this.curArgs.length||1===this.curArgs.length){if(0>P)throw SyntaxError('Expected positive number, got "'+P+'" at index "'+d+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+d+'"')}this.curArgs.push(P),this.curArgs.length===M[this.curCommandType]&&(w.HORIZ_LINE_TO===this.curCommandType?i({type:w.HORIZ_LINE_TO,relative:this.curCommandRelative,x:P}):w.VERT_LINE_TO===this.curCommandType?i({type:w.VERT_LINE_TO,relative:this.curCommandRelative,y:P}):this.curCommandType===w.MOVE_TO||this.curCommandType===w.LINE_TO||this.curCommandType===w.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),w.MOVE_TO===this.curCommandType&&(this.curCommandType=w.LINE_TO)):this.curCommandType===w.CURVE_TO?i({type:w.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===w.SMOOTH_CURVE_TO?i({type:w.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===w.QUAD_TO?i({type:w.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===w.ARC&&i({type:w.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!(" "===f||"	"===f||"\r"===f||"\n"===f)){if(","===f&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==f&&"-"!==f&&"."!==f){if(E)this.curNumber=f,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw SyntaxError("Unterminated command at index "+d+".");if(!this.canParseCommandOrComma)throw SyntaxError('Unexpected character "'+f+'" at index '+d+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==f&&"Z"!==f){if("h"===f||"H"===f)this.curCommandType=w.HORIZ_LINE_TO,this.curCommandRelative="h"===f;else if("v"===f||"V"===f)this.curCommandType=w.VERT_LINE_TO,this.curCommandRelative="v"===f;else if("m"===f||"M"===f)this.curCommandType=w.MOVE_TO,this.curCommandRelative="m"===f;else if("l"===f||"L"===f)this.curCommandType=w.LINE_TO,this.curCommandRelative="l"===f;else if("c"===f||"C"===f)this.curCommandType=w.CURVE_TO,this.curCommandRelative="c"===f;else if("s"===f||"S"===f)this.curCommandType=w.SMOOTH_CURVE_TO,this.curCommandRelative="s"===f;else if("q"===f||"Q"===f)this.curCommandType=w.QUAD_TO,this.curCommandRelative="q"===f;else if("t"===f||"T"===f)this.curCommandType=w.SMOOTH_QUAD_TO,this.curCommandRelative="t"===f;else{if("a"!==f&&"A"!==f)throw SyntaxError('Unexpected character "'+f+'" at index '+d+".");this.curCommandType=w.ARC,this.curCommandRelative="a"===f}}else c.push({type:w.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}}else this.curNumber=f,this.curNumberHasDecimal="."===f}}else this.curNumber+=f,this.curNumberHasDecimal=!0}else this.curNumber+=f}else this.curNumber+=f,this.curNumberHasExp=!0}else this.curNumber+=f,this.curNumberHasExpDigits=this.curNumberHasExp}return c},e.prototype.transform=function(h){return Object.create(this,{parse:{value:function(c,g){void 0===g&&(g=[]);for(var d=0,f=Object.getPrototypeOf(this).parse.call(this,c);d<f.length;d++){var x=h(f[d]);Array.isArray(x)?g.push.apply(g,x):g.push(x)}return g}}})},e}(C),w=function(h){function i(c){var g=h.call(this)||this;return g.commands="string"==typeof c?i.parse(c):c,g}return r(i,h),i.prototype.encode=function(){return i.encode(this.commands)},i.prototype.getBounds=function(){var h=b.CALCULATE_BOUNDS();return this.transform(h),h},i.prototype.transform=function(h){for(var c=[],g=0,d=this.commands;g<d.length;g++){var f=h(d[g]);Array.isArray(f)?c.push.apply(c,f):c.push(f)}return this.commands=c,this},i.encode=function(h){return e(h)},i.parse=function(h){var c=new A,g=[];return c.parse(h,g),c.finish(g),g},i.CLOSE_PATH=1,i.MOVE_TO=2,i.HORIZ_LINE_TO=4,i.VERT_LINE_TO=8,i.LINE_TO=16,i.CURVE_TO=32,i.SMOOTH_CURVE_TO=64,i.QUAD_TO=128,i.SMOOTH_QUAD_TO=256,i.ARC=512,i.LINE_COMMANDS=i.LINE_TO|i.HORIZ_LINE_TO|i.VERT_LINE_TO,i.DRAWING_COMMANDS=i.HORIZ_LINE_TO|i.VERT_LINE_TO|i.LINE_TO|i.CURVE_TO|i.SMOOTH_CURVE_TO|i.QUAD_TO|i.SMOOTH_QUAD_TO|i.ARC,i}(C),M=((T={})[w.MOVE_TO]=2,T[w.LINE_TO]=2,T[w.HORIZ_LINE_TO]=1,T[w.VERT_LINE_TO]=1,T[w.CLOSE_PATH]=0,T[w.QUAD_TO]=4,T[w.SMOOTH_QUAD_TO]=2,T[w.CURVE_TO]=6,T[w.SMOOTH_CURVE_TO]=4,T[w.ARC]=7,T);g(86884);var N=g(19338),_=Object.freeze({__proto__:null,offscreen:function(){var{DOMParser:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:h,createCanvas:(h,c)=>new OffscreenCanvas(h,c),createImage:h=>d(function*(){var c=yield fetch(h),g=yield c.blob();return yield createImageBitmap(g)})()};return("undefined"!=typeof DOMParser||void 0===h)&&Reflect.deleteProperty(c,"DOMParser"),c},node:function(h){var{DOMParser:c,canvas:g,fetch:d}=h;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:c,fetch:d,createCanvas:g.createCanvas,createImage:g.loadImage}}});function compressSpaces(h){return h.replace(/(?!\u3000)\s+/gm," ")}function trimLeft(h){return h.replace(/^[\n \t]+/,"")}function trimRight(h){return h.replace(/[\n \t]+$/,"")}function toNumbers(h){return((h||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}var V=/^[A-Z-]+$/;function normalizeAttributeName(h){return V.test(h)?h.toLowerCase():h}function parseExternalUrl(h){var c=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(h)||[];return c[2]||c[3]||c[4]}function normalizeColor(h){if(!h.startsWith("rgb"))return h;var c=3;return h.replace(/\d+(\.\d+)?/g,(h,g)=>c--&&g?String(Math.round(parseFloat(h))):h)}var R=/(\[[^\]]+\])/g,k=/(#[^\s+>~.[:]+)/g,L=/(\.[^\s+>~.[:]+)/g,B=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,D=/(:[\w-]+\([^)]*\))/gi,F=/(:[^\s+>~.[:]+)/g,z=/([^\s+>~.[:]+)/g;function findSelectorMatch(h,c){var g=c.exec(h);return g?[h.replace(c," "),g.length]:[h,0]}function getSelectorSpecificity(h){var c=[0,0,0],g=h.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),d=0;return[g,d]=findSelectorMatch(g,R),c[1]+=d,[g,d]=findSelectorMatch(g,k),c[0]+=d,[g,d]=findSelectorMatch(g,L),c[1]+=d,[g,d]=findSelectorMatch(g,B),c[2]+=d,[g,d]=findSelectorMatch(g,D),c[1]+=d,[g,d]=findSelectorMatch(g,F),c[1]+=d,g=g.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[g,d]=findSelectorMatch(g,z),c[2]+=d,c.join("")}var U=1e-8;function vectorMagnitude(h){return Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2))}function vectorsRatio(h,c){return(h[0]*c[0]+h[1]*c[1])/(vectorMagnitude(h)*vectorMagnitude(c))}function vectorsAngle(h,c){return(h[0]*c[1]<h[1]*c[0]?-1:1)*Math.acos(vectorsRatio(h,c))}function CB1(h){return h*h*h}function CB2(h){return 3*h*h*(1-h)}function CB3(h){return 3*h*(1-h)*(1-h)}function CB4(h){return(1-h)*(1-h)*(1-h)}function QB1(h){return h*h}function QB2(h){return 2*h*(1-h)}function QB3(h){return(1-h)*(1-h)}let Property=class Property{constructor(h,c,g){this.document=h,this.name=c,this.value=g,this.isNormalizedColor=!1}static empty(h){return new Property(h,"EMPTY","")}split(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",{document:c,name:g}=this;return compressSpaces(this.getString()).trim().split(h).map(h=>new Property(c,g,h))}hasValue(h){var{value:c}=this;return null!==c&&""!==c&&(h||0!==c)&&void 0!==c}isString(h){var{value:c}=this,g="string"==typeof c;return g&&h?h.test(c):g}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var h=this.getString();switch(!0){case h.endsWith("px"):case/^[0-9]+$/.test(h):return!0;default:return!1}}setValue(h){return this.value=h,this}getValue(h){return void 0===h||this.hasValue()?this.value:h}getNumber(h){if(!this.hasValue())return void 0===h?0:parseFloat(h);var{value:c}=this,g=parseFloat(c);return this.isString(/%$/)&&(g/=100),g}getString(h){return void 0===h||this.hasValue()?void 0===this.value?"":String(this.value):String(h)}getColor(h){var c=this.getString(h);return this.isNormalizedColor||(this.isNormalizedColor=!0,c=normalizeColor(c),this.value=c),c}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(h){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var[g,d]="boolean"==typeof h?[void 0,h]:[h],{viewPort:f}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(f.computeSize("x"),f.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(f.computeSize("x"),f.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*f.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*f.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&d:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*f.computeSize(g);default:var x=this.getNumber();if(c&&x<1)return x*f.computeSize(g);return x}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var h=this.getString(),c=/#([^)'"]+)/.exec(h);return c&&(c=c[1]),c||(c=h),this.document.definitions[c]}getFillStyleDefinition(h,c){var g=this.getDefinition();if(!g)return null;if("function"==typeof g.createGradient)return g.createGradient(this.document.ctx,h,c);if("function"==typeof g.createPattern){if(g.getHrefAttribute().hasValue()){var d=g.getAttribute("patternTransform");g=g.getHrefAttribute().getDefinition(),d.hasValue()&&g.getAttribute("patternTransform",!0).setValue(d.value)}return g.createPattern(this.document.ctx,h,c)}return null}getTextBaseline(){return this.hasValue()?Property.textBaselineMapping[this.getString()]:null}addOpacity(h){for(var c=this.getColor(),g=c.length,d=0,f=0;f<g&&(","===c[f]&&d++,3!==d);f++);if(h.hasValue()&&this.isString()&&3!==d){var x=new E(c);x.ok&&(x.alpha=h.getNumber(),c=x.toRGBA())}return new Property(this.document,this.name,c)}};Property.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};let ViewPort=class ViewPort{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(h,c){this.viewPorts.push({width:h,height:c})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:h}=this;return h[h.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(h){return"number"==typeof h?h:"x"===h?this.width:"y"===h?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}};let Point=class Point{constructor(h,c){this.x=h,this.y=c}static parse(h){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[g=c,d=c]=toNumbers(h);return new Point(g,d)}static parseScale(h){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[g=c,d=g]=toNumbers(h);return new Point(g,d)}static parsePath(h){for(var c=toNumbers(h),g=c.length,d=[],f=0;f<g;f+=2)d.push(new Point(c[f],c[f+1]));return d}angleTo(h){return Math.atan2(h.y-this.y,h.x-this.x)}applyTransform(h){var{x:c,y:g}=this,d=c*h[0]+g*h[2]+h[4],f=c*h[1]+g*h[3]+h[5];this.x=d,this.y=f}};let Mouse=class Mouse{constructor(h){this.screen=h,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:h,onClick:c,onMouseMove:g}=this,d=h.ctx.canvas;d.onclick=c,d.onmousemove=g,this.working=!0}}stop(){if(this.working){var h=this.screen.ctx.canvas;this.working=!1,h.onclick=null,h.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:h,events:c,eventElements:g}=this,{style:d}=h.ctx.canvas;d&&(d.cursor=""),c.forEach((h,c)=>{for(var{run:d}=h,f=g[c];f;)d(f),f=f.parent}),this.events=[],this.eventElements=[]}}checkPath(h,c){if(this.working&&c){var{events:g,eventElements:d}=this;g.forEach((g,f)=>{var{x,y:E}=g;!d[f]&&c.isPointInPath&&c.isPointInPath(x,E)&&(d[f]=h)})}}checkBoundingBox(h,c){if(this.working&&c){var{events:g,eventElements:d}=this;g.forEach((g,f)=>{var{x,y:E}=g;!d[f]&&c.isPointInBox(x,E)&&(d[f]=h)})}}mapXY(h,c){for(var{window:g,ctx:d}=this.screen,f=new Point(h,c),x=d.canvas;x;)f.x-=x.offsetLeft,f.y-=x.offsetTop,x=x.offsetParent;return g.scrollX&&(f.x+=g.scrollX),g.scrollY&&(f.y+=g.scrollY),f}onClick(h){var{x:c,y:g}=this.mapXY(h.clientX,h.clientY);this.events.push({type:"onclick",x:c,y:g,run(h){h.onClick&&h.onClick()}})}onMouseMove(h){var{x:c,y:g}=this.mapXY(h.clientX,h.clientY);this.events.push({type:"onmousemove",x:c,y:g,run(h){h.onMouseMove&&h.onMouseMove()}})}};var X="undefined"!=typeof window?window:null,Y="undefined"!=typeof fetch?fetch.bind(void 0):null;let Screen=class Screen{constructor(h){var{fetch:c=Y,window:g=X}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ctx=h,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new ViewPort,this.mouse=new Mouse(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=g,this.fetch=c}wait(h){this.waits.push(h)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var h=this.waits.every(h=>h());return h&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=h,h}setDefaults(h){h.strokeStyle="rgba(0,0,0,0)",h.lineCap="butt",h.lineJoin="miter",h.miterLimit=4}setViewBox(h){var{document:c,ctx:g,aspectRatio:d,width:f,desiredWidth:x,height:E,desiredHeight:P,minX:b=0,minY:S=0,refX:T,refY:C,clip:A=!1,clipX:w=0,clipY:M=0}=h,[N,_]=compressSpaces(d).replace(/^defer\s/,"").split(" "),V=N||"xMidYMid",R=_||"meet",k=f/x,L=E/P,B=Math.min(k,L),D=Math.max(k,L),F=x,z=P;"meet"===R&&(F*=B,z*=B),"slice"===R&&(F*=D,z*=D);var U=new Property(c,"refX",T),X=new Property(c,"refY",C),Y=U.hasValue()&&X.hasValue();if(Y&&g.translate(-B*U.getPixels("x"),-B*X.getPixels("y")),A){var j=B*w,G=B*M;g.beginPath(),g.moveTo(j,G),g.lineTo(f,G),g.lineTo(f,E),g.lineTo(j,E),g.closePath(),g.clip()}if(!Y){var Q="meet"===R&&B===L,W="slice"===R&&D===L,q="meet"===R&&B===k,$="slice"===R&&D===k;V.startsWith("xMid")&&(Q||W)&&g.translate(f/2-F/2,0),V.endsWith("YMid")&&(q||$)&&g.translate(0,E/2-z/2),V.startsWith("xMax")&&(Q||W)&&g.translate(f-F,0),V.endsWith("YMax")&&(q||$)&&g.translate(0,E-z)}switch(!0){case"none"===V:g.scale(k,L);break;case"meet"===R:g.scale(B,B);break;case"slice"===R:g.scale(D,D)}g.translate(-b,-S)}start(h){var{enableRedraw:c=!1,ignoreMouse:g=!1,ignoreAnimation:d=!1,ignoreDimensions:f=!1,ignoreClear:E=!1,forceRedraw:P,scaleWidth:b,scaleHeight:S,offsetX:T,offsetY:C}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{FRAMERATE:A,mouse:w}=this,M=1e3/A;if(this.frameDuration=M,this.readyPromise=new Promise(h=>{this.resolveReady=h}),this.isReady()&&this.render(h,f,E,b,S,T,C),c){var N=Date.now(),_=N,V=0,tick=()=>{(V=(N=Date.now())-_)>=M&&(_=N-V%M,this.shouldUpdate(d,P)&&(this.render(h,f,E,b,S,T,C),w.runEvents())),this.intervalId=x(tick)};g||w.start(),this.intervalId=x(tick)}}stop(){this.intervalId&&(x.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(h,c){if(!h){var{frameDuration:g}=this;if(this.animations.reduce((h,c)=>c.update(g)||h,!1))return!0}return!!("function"==typeof c&&c()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(h,c,g,d,f,x,E){var{CLIENT_WIDTH:P,CLIENT_HEIGHT:b,viewPort:S,ctx:T,isFirstRender:C}=this,A=T.canvas;S.clear(),A.width&&A.height?S.setCurrent(A.width,A.height):S.setCurrent(P,b);var w=h.getStyle("width"),M=h.getStyle("height");!c&&(C||"number"!=typeof d&&"number"!=typeof f)&&(w.hasValue()&&(A.width=w.getPixels("x"),A.style&&(A.style.width="".concat(A.width,"px"))),M.hasValue()&&(A.height=M.getPixels("y"),A.style&&(A.style.height="".concat(A.height,"px"))));var N=A.clientWidth||A.width,_=A.clientHeight||A.height;if(c&&w.hasValue()&&M.hasValue()&&(N=w.getPixels("x"),_=M.getPixels("y")),S.setCurrent(N,_),"number"==typeof x&&h.getAttribute("x",!0).setValue(x),"number"==typeof E&&h.getAttribute("y",!0).setValue(E),"number"==typeof d||"number"==typeof f){var V=toNumbers(h.getAttribute("viewBox").getString()),R=0,k=0;if("number"==typeof d){var L=h.getStyle("width");L.hasValue()?R=L.getPixels("x")/d:isNaN(V[2])||(R=V[2]/d)}if("number"==typeof f){var B=h.getStyle("height");B.hasValue()?k=B.getPixels("y")/f:isNaN(V[3])||(k=V[3]/f)}R||(R=k),k||(k=R),h.getAttribute("width",!0).setValue(d),h.getAttribute("height",!0).setValue(f);var D=h.getStyle("transform",!0,!0);D.setValue("".concat(D.getString()," scale(").concat(1/R,", ").concat(1/k,")"))}g||T.clearRect(0,0,N,_),h.render(T),C&&(this.isFirstRender=!1)}};Screen.defaultWindow=X,Screen.defaultFetch=Y;var{defaultFetch:j}=Screen,G="undefined"!=typeof DOMParser?DOMParser:null;let Parser=class Parser{constructor(){var{fetch:h=j,DOMParser:c=G}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fetch=h,this.DOMParser=c}parse(h){var c=this;return d(function*(){return h.startsWith("<")?c.parseFromString(h):c.load(h)})()}parseFromString(h){var c=new this.DOMParser;try{return this.checkDocument(c.parseFromString(h,"image/svg+xml"))}catch(g){return this.checkDocument(c.parseFromString(h,"text/xml"))}}checkDocument(h){var c=h.getElementsByTagName("parsererror")[0];if(c)throw Error(c.textContent);return h}load(h){var c=this;return d(function*(){var g=yield c.fetch(h),d=yield g.text();return c.parseFromString(d)})()}};let Translate=class Translate{constructor(h,c){this.type="translate",this.point=null,this.point=Point.parse(c)}apply(h){var{x:c,y:g}=this.point;h.translate(c||0,g||0)}unapply(h){var{x:c,y:g}=this.point;h.translate(-1*c||0,-1*g||0)}applyToPoint(h){var{x:c,y:g}=this.point;h.applyTransform([1,0,0,1,c||0,g||0])}};let Rotate=class Rotate{constructor(h,c,g){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var d=toNumbers(c);this.angle=new Property(h,"angle",d[0]),this.originX=g[0],this.originY=g[1],this.cx=d[1]||0,this.cy=d[2]||0}apply(h){var{cx:c,cy:g,originX:d,originY:f,angle:x}=this,E=c+d.getPixels("x"),P=g+f.getPixels("y");h.translate(E,P),h.rotate(x.getRadians()),h.translate(-E,-P)}unapply(h){var{cx:c,cy:g,originX:d,originY:f,angle:x}=this,E=c+d.getPixels("x"),P=g+f.getPixels("y");h.translate(E,P),h.rotate(-1*x.getRadians()),h.translate(-E,-P)}applyToPoint(h){var{cx:c,cy:g,angle:d}=this,f=d.getRadians();h.applyTransform([1,0,0,1,c||0,g||0]),h.applyTransform([Math.cos(f),Math.sin(f),-Math.sin(f),Math.cos(f),0,0]),h.applyTransform([1,0,0,1,-c||0,-g||0])}};let Scale=class Scale{constructor(h,c,g){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var d=Point.parseScale(c);(0===d.x||0===d.y)&&(d.x=U,d.y=U),this.scale=d,this.originX=g[0],this.originY=g[1]}apply(h){var{scale:{x:c,y:g},originX:d,originY:f}=this,x=d.getPixels("x"),E=f.getPixels("y");h.translate(x,E),h.scale(c,g||c),h.translate(-x,-E)}unapply(h){var{scale:{x:c,y:g},originX:d,originY:f}=this,x=d.getPixels("x"),E=f.getPixels("y");h.translate(x,E),h.scale(1/c,1/g||c),h.translate(-x,-E)}applyToPoint(h){var{x:c,y:g}=this.scale;h.applyTransform([c||0,0,0,g||0,0,0])}};let Matrix=class Matrix{constructor(h,c,g){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=toNumbers(c),this.originX=g[0],this.originY=g[1]}apply(h){var{originX:c,originY:g,matrix:d}=this,f=c.getPixels("x"),x=g.getPixels("y");h.translate(f,x),h.transform(d[0],d[1],d[2],d[3],d[4],d[5]),h.translate(-f,-x)}unapply(h){var{originX:c,originY:g,matrix:d}=this,f=d[0],x=d[2],E=d[4],P=d[1],b=d[3],S=d[5],T=1/(f*(1*b-0*S)-x*(1*P-0*S)+E*(0*P-0*b)),C=c.getPixels("x"),A=g.getPixels("y");h.translate(C,A),h.transform(T*(1*b-0*S),T*(0*S-1*P),T*(0*E-1*x),T*(1*f-0*E),T*(x*S-E*b),T*(E*P-f*S)),h.translate(-C,-A)}applyToPoint(h){h.applyTransform(this.matrix)}};let Skew=class Skew extends Matrix{constructor(h,c,g){super(h,c,g),this.type="skew",this.angle=null,this.angle=new Property(h,"angle",c)}};let SkewX=class SkewX extends Skew{constructor(h,c,g){super(h,c,g),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}};let SkewY=class SkewY extends Skew{constructor(h,c,g){super(h,c,g),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}};function parseTransforms(h){return compressSpaces(h).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function parseTransform(h){var[c,g]=h.split("(");return[c.trim(),g.trim().replace(")","")]}let Transform=class Transform{constructor(h,c,g){this.document=h,this.transforms=[],parseTransforms(c).forEach(h=>{if("none"!==h){var[c,d]=parseTransform(h),f=Transform.transformTypes[c];void 0!==f&&this.transforms.push(new f(this.document,d,g))}})}static fromElement(h,c){var g=c.getStyle("transform",!1,!0),[d,f=d]=c.getStyle("transform-origin",!1,!0).split();return g.hasValue()?new Transform(h,g.getString(),[d,f]):null}apply(h){for(var{transforms:c}=this,g=c.length,d=0;d<g;d++)c[d].apply(h)}unapply(h){for(var{transforms:c}=this,g=c.length,d=g-1;d>=0;d--)c[d].unapply(h)}applyToPoint(h){for(var{transforms:c}=this,g=c.length,d=0;d<g;d++)c[d].applyToPoint(h)}};Transform.transformTypes={translate:Translate,rotate:Rotate,scale:Scale,matrix:Matrix,skewX:SkewX,skewY:SkewY};let Element=class Element{constructor(h,c){var g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.document=h,this.node=c,this.captureTextNodes=g,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!c||1!==c.nodeType)return;Array.from(c.attributes).forEach(c=>{var g=normalizeAttributeName(c.nodeName);this.attributes[g]=new Property(h,g,c.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(h=>h.trim()).forEach(c=>{if(c){var[g,d]=c.split(":").map(h=>h.trim());this.styles[g]=new Property(h,g,d)}});var{definitions:d}=h,f=this.getAttribute("id");f.hasValue()&&!d[f.getString()]&&(d[f.getString()]=this),Array.from(c.childNodes).forEach(c=>{if(1===c.nodeType)this.addChild(c);else if(g&&(3===c.nodeType||4===c.nodeType)){var d=h.createTextNode(c);d.getText().length>0&&this.addChild(d)}})}getAttribute(h){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=this.attributes[h];if(!g&&c){var d=new Property(this.document,h,"");return this.attributes[h]=d,d}return g||Property.empty(this.document)}getHrefAttribute(){for(var h in this.attributes)if("href"===h||h.endsWith(":href"))return this.attributes[h];return Property.empty(this.document)}getStyle(h){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=this.styles[h];if(d)return d;var f=this.getAttribute(h);if(null!=f&&f.hasValue())return this.styles[h]=f,f;if(!g){var{parent:x}=this;if(x){var E=x.getStyle(h);if(null!=E&&E.hasValue())return E}}if(c){var P=new Property(this.document,h,"");return this.styles[h]=P,P}return d||Property.empty(this.document)}render(h){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(h.save(),this.getStyle("mask").hasValue()){var c=this.getStyle("mask").getDefinition();c&&(this.applyEffects(h),c.apply(h,this))}else if("none"!==this.getStyle("filter").getValue("none")){var g=this.getStyle("filter").getDefinition();g&&(this.applyEffects(h),g.apply(h,this))}else this.setContext(h),this.renderChildren(h),this.clearContext(h);h.restore()}}setContext(h){}applyEffects(h){var c=Transform.fromElement(this.document,this);c&&c.apply(h);var g=this.getStyle("clip-path",!1,!0);if(g.hasValue()){var d=g.getDefinition();d&&d.apply(h)}}clearContext(h){}renderChildren(h){this.children.forEach(c=>{c.render(h)})}addChild(h){var c=h instanceof Element?h:this.document.createElement(h);c.parent=this,Element.ignoreChildTypes.includes(c.type)||this.children.push(c)}matchesSelector(h){var c,{node:g}=this;if("function"==typeof g.matches)return g.matches(h);var d=null===(c=g.getAttribute)||void 0===c?void 0:c.call(g,"class");return!!d&&""!==d&&d.split(" ").some(c=>".".concat(c)===h)}addStylesFromStyleDefinition(){var{styles:h,stylesSpecificity:c}=this.document;for(var g in h)if(!g.startsWith("@")&&this.matchesSelector(g)){var d=h[g],f=c[g];if(d)for(var x in d){var E=this.stylesSpecificity[x];void 0===E&&(E="000"),f>=E&&(this.styles[x]=d[x],this.stylesSpecificity[x]=f)}}}removeStyles(h,c){return c.reduce((c,g)=>{var d=h.getStyle(g);if(!d.hasValue())return c;var f=d.getString();return d.setValue(""),[...c,[g,f]]},[])}restoreStyles(h,c){c.forEach(c=>{var[g,d]=c;h.getStyle(g,!0).setValue(d)})}isFirstChild(){var h;return(null===(h=this.parent)||void 0===h?void 0:h.children.indexOf(this))===0}};Element.ignoreChildTypes=["title"];let UnknownElement=class UnknownElement extends Element{constructor(h,c,g){super(h,c,g)}};function wrapFontFamily(h){var c=h.trim();return/^('|")/.test(c)?c:'"'.concat(c,'"')}function prepareFontFamily(h){return"undefined"==typeof process?h:h.trim().split(",").map(wrapFontFamily).join(",")}function prepareFontStyle(h){if(!h)return"";var c=h.trim().toLowerCase();switch(c){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return c;default:if(/^oblique\s+(-|)\d+deg$/.test(c))return c;return""}}function prepareFontWeight(h){if(!h)return"";var c=h.trim().toLowerCase();switch(c){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return c;default:if(/^[\d.]+$/.test(c))return c;return""}}let Font=class Font{constructor(h,c,g,d,f,x){var E=x?"string"==typeof x?Font.parse(x):x:{};this.fontFamily=f||E.fontFamily,this.fontSize=d||E.fontSize,this.fontStyle=h||E.fontStyle,this.fontWeight=g||E.fontWeight,this.fontVariant=c||E.fontVariant}static parse(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1?arguments[1]:void 0,g="",d="",f="",x="",E="",P=compressSpaces(h).trim().split(" "),b={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return P.forEach(h=>{switch(!0){case!b.fontStyle&&Font.styles.includes(h):"inherit"!==h&&(g=h),b.fontStyle=!0;break;case!b.fontVariant&&Font.variants.includes(h):"inherit"!==h&&(d=h),b.fontStyle=!0,b.fontVariant=!0;break;case!b.fontWeight&&Font.weights.includes(h):"inherit"!==h&&(f=h),b.fontStyle=!0,b.fontVariant=!0,b.fontWeight=!0;break;case!b.fontSize:"inherit"!==h&&([x]=h.split("/")),b.fontStyle=!0,b.fontVariant=!0,b.fontWeight=!0,b.fontSize=!0;break;default:"inherit"!==h&&(E+=h)}}),new Font(g,d,f,x,E,c)}toString(){return[prepareFontStyle(this.fontStyle),this.fontVariant,prepareFontWeight(this.fontWeight),this.fontSize,prepareFontFamily(this.fontFamily)].join(" ").trim()}};Font.styles="normal|italic|oblique|inherit",Font.variants="normal|small-caps|inherit",Font.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";let BoundingBox=class BoundingBox{constructor(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;this.x1=h,this.y1=c,this.x2=g,this.y2=d,this.addPoint(h,c),this.addPoint(g,d)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(h,c){void 0!==h&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=h,this.x2=h),h<this.x1&&(this.x1=h),h>this.x2&&(this.x2=h)),void 0!==c&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=c,this.y2=c),c<this.y1&&(this.y1=c),c>this.y2&&(this.y2=c))}addX(h){this.addPoint(h,null)}addY(h){this.addPoint(null,h)}addBoundingBox(h){if(h){var{x1:c,y1:g,x2:d,y2:f}=h;this.addPoint(c,g),this.addPoint(d,f)}}sumCubic(h,c,g,d,f){return Math.pow(1-h,3)*c+3*Math.pow(1-h,2)*h*g+3*(1-h)*Math.pow(h,2)*d+Math.pow(h,3)*f}bezierCurveAdd(h,c,g,d,f){var x=6*c-12*g+6*d,E=-3*c+9*g-9*d+3*f,P=3*g-3*c;if(0===E){if(0===x)return;var b=-P/x;0<b&&b<1&&(h?this.addX(this.sumCubic(b,c,g,d,f)):this.addY(this.sumCubic(b,c,g,d,f)));return}var S=Math.pow(x,2)-4*P*E;if(!(S<0)){var T=(-x+Math.sqrt(S))/(2*E);0<T&&T<1&&(h?this.addX(this.sumCubic(T,c,g,d,f)):this.addY(this.sumCubic(T,c,g,d,f)));var C=(-x-Math.sqrt(S))/(2*E);0<C&&C<1&&(h?this.addX(this.sumCubic(C,c,g,d,f)):this.addY(this.sumCubic(C,c,g,d,f)))}}addBezierCurve(h,c,g,d,f,x,E,P){this.addPoint(h,c),this.addPoint(E,P),this.bezierCurveAdd(!0,h,g,f,E),this.bezierCurveAdd(!1,c,d,x,P)}addQuadraticCurve(h,c,g,d,f,x){var E=h+2/3*(g-h),P=c+2/3*(d-c),b=E+1/3*(f-h),S=P+1/3*(x-c);this.addBezierCurve(h,c,E,b,P,S,f,x)}isPointInBox(h,c){var{x1:g,y1:d,x2:f,y2:x}=this;return g<=h&&h<=f&&d<=c&&c<=x}};let PathParser=class PathParser extends w{constructor(h){super(h.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]}isEnd(){var{i:h,commands:c}=this;return h>=c.length-1}next(){var h=this.commands[++this.i];return this.previousCommand=this.command,this.command=h,h}getPoint(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",g=new Point(this.command[h],this.command[c]);return this.makeAbsolute(g)}getAsControlPoint(h,c){var g=this.getPoint(h,c);return this.control=g,g}getAsCurrentPoint(h,c){var g=this.getPoint(h,c);return this.current=g,g}getReflectedControlPoint(){var h=this.previousCommand.type;if(h!==w.CURVE_TO&&h!==w.SMOOTH_CURVE_TO&&h!==w.QUAD_TO&&h!==w.SMOOTH_QUAD_TO)return this.current;var{current:{x:c,y:g},control:{x:d,y:f}}=this;return new Point(2*c-d,2*g-f)}makeAbsolute(h){if(this.command.relative){var{x:c,y:g}=this.current;h.x+=c,h.y+=g}return h}addMarker(h,c,g){var{points:d,angles:f}=this;g&&f.length>0&&!f[f.length-1]&&(f[f.length-1]=d[d.length-1].angleTo(g)),this.addMarkerAngle(h,c?c.angleTo(h):null)}addMarkerAngle(h,c){this.points.push(h),this.angles.push(c)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:h}=this,c=h.length,g=0;g<c;g++)if(!h[g]){for(var d=g+1;d<c;d++)if(h[d]){h[g]=h[d];break}}return h}};let RenderedElement=class RenderedElement extends Element{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var h=1,c=this;c;){var g=c.getStyle("opacity",!1,!0);g.hasValue(!0)&&(h*=g.getNumber()),c=c.parent}return h}setContext(h){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!c){var g=this.getStyle("fill"),d=this.getStyle("fill-opacity"),f=this.getStyle("stroke"),x=this.getStyle("stroke-opacity");if(g.isUrlDefinition()){var E=g.getFillStyleDefinition(this,d);E&&(h.fillStyle=E)}else if(g.hasValue()){"currentColor"===g.getString()&&g.setValue(this.getStyle("color").getColor());var P=g.getColor();"inherit"!==P&&(h.fillStyle="none"===P?"rgba(0,0,0,0)":P)}if(d.hasValue()){var b=new Property(this.document,"fill",h.fillStyle).addOpacity(d).getColor();h.fillStyle=b}if(f.isUrlDefinition()){var S=f.getFillStyleDefinition(this,x);S&&(h.strokeStyle=S)}else if(f.hasValue()){"currentColor"===f.getString()&&f.setValue(this.getStyle("color").getColor());var T=f.getString();"inherit"!==T&&(h.strokeStyle="none"===T?"rgba(0,0,0,0)":T)}if(x.hasValue()){var C=new Property(this.document,"stroke",h.strokeStyle).addOpacity(x).getString();h.strokeStyle=C}var A=this.getStyle("stroke-width");if(A.hasValue()){var w=A.getPixels();h.lineWidth=w||U}var M=this.getStyle("stroke-linecap"),N=this.getStyle("stroke-linejoin"),_=this.getStyle("stroke-miterlimit"),V=this.getStyle("stroke-dasharray"),R=this.getStyle("stroke-dashoffset");if(M.hasValue()&&(h.lineCap=M.getString()),N.hasValue()&&(h.lineJoin=N.getString()),_.hasValue()&&(h.miterLimit=_.getNumber()),V.hasValue()&&"none"!==V.getString()){var k=toNumbers(V.getString());void 0!==h.setLineDash?h.setLineDash(k):void 0!==h.webkitLineDash?h.webkitLineDash=k:void 0===h.mozDash||1===k.length&&0===k[0]||(h.mozDash=k);var L=R.getPixels();void 0!==h.lineDashOffset?h.lineDashOffset=L:void 0!==h.webkitLineDashOffset?h.webkitLineDashOffset=L:void 0!==h.mozDashOffset&&(h.mozDashOffset=L)}}if(this.modifiedEmSizeStack=!1,void 0!==h.font){var B=this.getStyle("font"),D=this.getStyle("font-style"),F=this.getStyle("font-variant"),z=this.getStyle("font-weight"),X=this.getStyle("font-size"),Y=this.getStyle("font-family"),j=new Font(D.getString(),F.getString(),z.getString(),X.hasValue()?"".concat(X.getPixels(!0),"px"):"",Y.getString(),Font.parse(B.getString(),h.font));D.setValue(j.fontStyle),F.setValue(j.fontVariant),z.setValue(j.fontWeight),X.setValue(j.fontSize),Y.setValue(j.fontFamily),h.font=j.toString(),X.isPixels()&&(this.document.emSize=X.getPixels(),this.modifiedEmSizeStack=!0)}c||(this.applyEffects(h),h.globalAlpha=this.calculateOpacity())}clearContext(h){super.clearContext(h),this.modifiedEmSizeStack&&this.document.popEmSize()}};let PathElement=class PathElement extends RenderedElement{constructor(h,c,g){super(h,c,g),this.type="path",this.pathParser=null,this.pathParser=new PathParser(this.getAttribute("d").getString())}path(h){var{pathParser:c}=this,g=new BoundingBox;for(c.reset(),h&&h.beginPath();!c.isEnd();)switch(c.next().type){case PathParser.MOVE_TO:this.pathM(h,g);break;case PathParser.LINE_TO:this.pathL(h,g);break;case PathParser.HORIZ_LINE_TO:this.pathH(h,g);break;case PathParser.VERT_LINE_TO:this.pathV(h,g);break;case PathParser.CURVE_TO:this.pathC(h,g);break;case PathParser.SMOOTH_CURVE_TO:this.pathS(h,g);break;case PathParser.QUAD_TO:this.pathQ(h,g);break;case PathParser.SMOOTH_QUAD_TO:this.pathT(h,g);break;case PathParser.ARC:this.pathA(h,g);break;case PathParser.CLOSE_PATH:this.pathZ(h,g)}return g}getBoundingBox(h){return this.path()}getMarkers(){var{pathParser:h}=this,c=h.getMarkerPoints(),g=h.getMarkerAngles();return c.map((h,c)=>[h,g[c]])}renderChildren(h){this.path(h),this.document.screen.mouse.checkPath(this,h);var c=this.getStyle("fill-rule");""!==h.fillStyle&&("inherit"!==c.getString("inherit")?h.fill(c.getString()):h.fill()),""!==h.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(h.save(),h.setTransform(1,0,0,1,0,0),h.stroke(),h.restore()):h.stroke());var g=this.getMarkers();if(g){var d=g.length-1,f=this.getStyle("marker-start"),x=this.getStyle("marker-mid"),E=this.getStyle("marker-end");if(f.isUrlDefinition()){var P=f.getDefinition(),[b,S]=g[0];P.render(h,b,S)}if(x.isUrlDefinition())for(var T=x.getDefinition(),C=1;C<d;C++){var[A,w]=g[C];T.render(h,A,w)}if(E.isUrlDefinition()){var M=E.getDefinition(),[N,_]=g[d];M.render(h,N,_)}}}static pathM(h){var c=h.getAsCurrentPoint();return h.start=h.current,{point:c}}pathM(h,c){var{pathParser:g}=this,{point:d}=PathElement.pathM(g),{x:f,y:x}=d;g.addMarker(d),c.addPoint(f,x),h&&h.moveTo(f,x)}static pathL(h){var{current:c}=h;return{current:c,point:h.getAsCurrentPoint()}}pathL(h,c){var{pathParser:g}=this,{current:d,point:f}=PathElement.pathL(g),{x,y:E}=f;g.addMarker(f,d),c.addPoint(x,E),h&&h.lineTo(x,E)}static pathH(h){var{current:c,command:g}=h,d=new Point((g.relative?c.x:0)+g.x,c.y);return h.current=d,{current:c,point:d}}pathH(h,c){var{pathParser:g}=this,{current:d,point:f}=PathElement.pathH(g),{x,y:E}=f;g.addMarker(f,d),c.addPoint(x,E),h&&h.lineTo(x,E)}static pathV(h){var{current:c,command:g}=h,d=new Point(c.x,(g.relative?c.y:0)+g.y);return h.current=d,{current:c,point:d}}pathV(h,c){var{pathParser:g}=this,{current:d,point:f}=PathElement.pathV(g),{x,y:E}=f;g.addMarker(f,d),c.addPoint(x,E),h&&h.lineTo(x,E)}static pathC(h){var{current:c}=h;return{current:c,point:h.getPoint("x1","y1"),controlPoint:h.getAsControlPoint("x2","y2"),currentPoint:h.getAsCurrentPoint()}}pathC(h,c){var{pathParser:g}=this,{current:d,point:f,controlPoint:x,currentPoint:E}=PathElement.pathC(g);g.addMarker(E,x,f),c.addBezierCurve(d.x,d.y,f.x,f.y,x.x,x.y,E.x,E.y),h&&h.bezierCurveTo(f.x,f.y,x.x,x.y,E.x,E.y)}static pathS(h){var{current:c}=h;return{current:c,point:h.getReflectedControlPoint(),controlPoint:h.getAsControlPoint("x2","y2"),currentPoint:h.getAsCurrentPoint()}}pathS(h,c){var{pathParser:g}=this,{current:d,point:f,controlPoint:x,currentPoint:E}=PathElement.pathS(g);g.addMarker(E,x,f),c.addBezierCurve(d.x,d.y,f.x,f.y,x.x,x.y,E.x,E.y),h&&h.bezierCurveTo(f.x,f.y,x.x,x.y,E.x,E.y)}static pathQ(h){var{current:c}=h;return{current:c,controlPoint:h.getAsControlPoint("x1","y1"),currentPoint:h.getAsCurrentPoint()}}pathQ(h,c){var{pathParser:g}=this,{current:d,controlPoint:f,currentPoint:x}=PathElement.pathQ(g);g.addMarker(x,f,f),c.addQuadraticCurve(d.x,d.y,f.x,f.y,x.x,x.y),h&&h.quadraticCurveTo(f.x,f.y,x.x,x.y)}static pathT(h){var{current:c}=h,g=h.getReflectedControlPoint();return h.control=g,{current:c,controlPoint:g,currentPoint:h.getAsCurrentPoint()}}pathT(h,c){var{pathParser:g}=this,{current:d,controlPoint:f,currentPoint:x}=PathElement.pathT(g);g.addMarker(x,f,f),c.addQuadraticCurve(d.x,d.y,f.x,f.y,x.x,x.y),h&&h.quadraticCurveTo(f.x,f.y,x.x,x.y)}static pathA(h){var{current:c,command:g}=h,{rX:d,rY:f,xRot:x,lArcFlag:E,sweepFlag:P}=g,b=x*(Math.PI/180),S=h.getAsCurrentPoint(),T=new Point(Math.cos(b)*(c.x-S.x)/2+Math.sin(b)*(c.y-S.y)/2,-Math.sin(b)*(c.x-S.x)/2+Math.cos(b)*(c.y-S.y)/2),C=Math.pow(T.x,2)/Math.pow(d,2)+Math.pow(T.y,2)/Math.pow(f,2);C>1&&(d*=Math.sqrt(C),f*=Math.sqrt(C));var A=(E===P?-1:1)*Math.sqrt((Math.pow(d,2)*Math.pow(f,2)-Math.pow(d,2)*Math.pow(T.y,2)-Math.pow(f,2)*Math.pow(T.x,2))/(Math.pow(d,2)*Math.pow(T.y,2)+Math.pow(f,2)*Math.pow(T.x,2)));isNaN(A)&&(A=0);var w=new Point(A*d*T.y/f,-(A*f)*T.x/d),M=new Point((c.x+S.x)/2+Math.cos(b)*w.x-Math.sin(b)*w.y,(c.y+S.y)/2+Math.sin(b)*w.x+Math.cos(b)*w.y),N=vectorsAngle([1,0],[(T.x-w.x)/d,(T.y-w.y)/f]),_=[(T.x-w.x)/d,(T.y-w.y)/f],V=[(-T.x-w.x)/d,(-T.y-w.y)/f],R=vectorsAngle(_,V);return -1>=vectorsRatio(_,V)&&(R=Math.PI),vectorsRatio(_,V)>=1&&(R=0),{currentPoint:S,rX:d,rY:f,sweepFlag:P,xAxisRotation:b,centp:M,a1:N,ad:R}}pathA(h,c){var{pathParser:g}=this,{currentPoint:d,rX:f,rY:x,sweepFlag:E,xAxisRotation:P,centp:b,a1:S,ad:T}=PathElement.pathA(g),C=1-E?1:-1,A=S+C*(T/2),w=new Point(b.x+f*Math.cos(A),b.y+x*Math.sin(A));if(g.addMarkerAngle(w,A-C*Math.PI/2),g.addMarkerAngle(d,A-C*Math.PI),c.addPoint(d.x,d.y),h&&!isNaN(S)&&!isNaN(T)){var M=f>x?f:x,N=f>x?1:f/x,_=f>x?x/f:1;h.translate(b.x,b.y),h.rotate(P),h.scale(N,_),h.arc(0,0,M,S,S+T,!!(1-E)),h.scale(1/N,1/_),h.rotate(-P),h.translate(-b.x,-b.y)}}static pathZ(h){h.current=h.start}pathZ(h,c){PathElement.pathZ(this.pathParser),h&&c.x1!==c.x2&&c.y1!==c.y2&&h.closePath()}};let GlyphElement=class GlyphElement extends PathElement{constructor(h,c,g){super(h,c,g),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}};let TextElement=class TextElement extends RenderedElement{constructor(h,c,g){super(h,c,new.target===TextElement||g),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(h){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setContext(h,c);var g=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();g&&(h.textBaseline=g)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(h){if("text"!==this.type)return this.getTElementBoundingBox(h);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(h);var c=null;return this.children.forEach((g,d)=>{var f=this.getChildBoundingBox(h,this,this,d);c?c.addBoundingBox(f):c=f}),c}getFontSize(){var{document:h,parent:c}=this,g=Font.parse(h.ctx.font).fontSize;return c.getStyle("font-size").getNumber(g)}getTElementBoundingBox(h){var c=this.getFontSize();return new BoundingBox(this.x,this.y-c,this.x+this.measureText(h),this.y)}getGlyph(h,c,g){var d=c[g],f=null;if(h.isArabic){var x=c.length,E=c[g-1],P=c[g+1],b="isolated";if((0===g||" "===E)&&g<x-1&&" "!==P&&(b="terminal"),g>0&&" "!==E&&g<x-1&&" "!==P&&(b="medial"),g>0&&" "!==E&&(g===x-1||" "===P)&&(b="initial"),void 0!==h.glyphs[d]){var S=h.glyphs[d];f=S instanceof GlyphElement?S:S[b]}}else f=h.glyphs[d];return f||(f=h.missingGlyph),f}getText(){return""}getTextFromNode(h){var c=h||this.node,g=Array.from(c.parentNode.childNodes),d=g.indexOf(c),f=g.length-1,x=compressSpaces(c.textContent||"");return 0===d&&(x=trimLeft(x)),d===f&&(x=trimRight(x)),x}renderChildren(h){if("text"!==this.type){this.renderTElementChildren(h);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(h),this.children.forEach((c,g)=>{this.renderChild(h,this,this,g)});var{mouse:c}=this.document.screen;c.isWorking()&&c.checkBoundingBox(this,this.getBoundingBox(h))}renderTElementChildren(h){var{document:c,parent:g}=this,d=this.getText(),f=g.getStyle("font-family").getDefinition();if(f){for(var{unitsPerEm:x}=f.fontFace,E=Font.parse(c.ctx.font),P=g.getStyle("font-size").getNumber(E.fontSize),b=g.getStyle("font-style").getString(E.fontStyle),S=P/x,T=f.isRTL?d.split("").reverse().join(""):d,C=toNumbers(g.getAttribute("dx").getString()),A=T.length,w=0;w<A;w++){var M=this.getGlyph(f,T,w);h.translate(this.x,this.y),h.scale(S,-S);var N=h.lineWidth;h.lineWidth=h.lineWidth*x/P,"italic"===b&&h.transform(1,0,.4,1,0,0),M.render(h),"italic"===b&&h.transform(1,0,-.4,1,0,0),h.lineWidth=N,h.scale(1/S,-1/S),h.translate(-this.x,-this.y),this.x+=P*(M.horizAdvX||f.horizAdvX)/x,void 0===C[w]||isNaN(C[w])||(this.x+=C[w])}return}var{x:_,y:V}=this;h.fillStyle&&h.fillText(d,_,V),h.strokeStyle&&h.strokeText(d,_,V)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var h=this.leafTexts[this.textChunkStart],c=h.getStyle("text-anchor").getString("start"),g=0;g="start"===c?h.x-this.minX:"end"===c?h.x-this.maxX:h.x-(this.minX+this.maxX)/2;for(var d=this.textChunkStart;d<this.leafTexts.length;d++)this.leafTexts[d].x+=g;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(h){this.children.forEach((c,g)=>{this.adjustChildCoordinatesRecursiveCore(h,this,this,g)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(h,c,g,d){var f=g.children[d];f.children.length>0?f.children.forEach((g,d)=>{c.adjustChildCoordinatesRecursiveCore(h,c,f,d)}):this.adjustChildCoordinates(h,c,g,d)}adjustChildCoordinates(h,c,g,d){var f=g.children[d];if("function"!=typeof f.measureText)return f;h.save(),f.setContext(h,!0);var x=f.getAttribute("x"),E=f.getAttribute("y"),P=f.getAttribute("dx"),b=f.getAttribute("dy"),S=f.getStyle("font-family").getDefinition(),T=!!S&&S.isRTL;0!==d||(x.hasValue()||x.setValue(f.getInheritedAttribute("x")),E.hasValue()||E.setValue(f.getInheritedAttribute("y")),P.hasValue()||P.setValue(f.getInheritedAttribute("dx")),b.hasValue()||b.setValue(f.getInheritedAttribute("dy")));var C=f.measureText(h);return T&&(c.x-=C),x.hasValue()?(c.applyAnchoring(),f.x=x.getPixels("x"),P.hasValue()&&(f.x+=P.getPixels("x"))):(P.hasValue()&&(c.x+=P.getPixels("x")),f.x=c.x),c.x=f.x,T||(c.x+=C),E.hasValue()?(f.y=E.getPixels("y"),b.hasValue()&&(f.y+=b.getPixels("y"))):(b.hasValue()&&(c.y+=b.getPixels("y")),f.y=c.y),c.y=f.y,c.leafTexts.push(f),c.minX=Math.min(c.minX,f.x,f.x+C),c.maxX=Math.max(c.maxX,f.x,f.x+C),f.clearContext(h),h.restore(),f}getChildBoundingBox(h,c,g,d){var f=g.children[d];if("function"!=typeof f.getBoundingBox)return null;var x=f.getBoundingBox(h);return x?(f.children.forEach((g,d)=>{var E=c.getChildBoundingBox(h,c,f,d);x.addBoundingBox(E)}),x):null}renderChild(h,c,g,d){var f=g.children[d];f.render(h),f.children.forEach((g,d)=>{c.renderChild(h,c,f,d)})}measureText(h){var{measureCache:c}=this;if(~c)return c;var g=this.getText(),d=this.measureTargetText(h,g);return this.measureCache=d,d}measureTargetText(h,c){if(!c.length)return 0;var{parent:g}=this,d=g.getStyle("font-family").getDefinition();if(d){for(var f=this.getFontSize(),x=d.isRTL?c.split("").reverse().join(""):c,E=toNumbers(g.getAttribute("dx").getString()),P=x.length,b=0,S=0;S<P;S++)b+=(this.getGlyph(d,x,S).horizAdvX||d.horizAdvX)*f/d.fontFace.unitsPerEm,void 0===E[S]||isNaN(E[S])||(b+=E[S]);return b}if(!h.measureText)return 10*c.length;h.save(),this.setContext(h,!0);var{width:T}=h.measureText(c);return this.clearContext(h),h.restore(),T}getInheritedAttribute(h){for(var c=this;c instanceof TextElement&&c.isFirstChild();){var g=c.parent.getAttribute(h);if(g.hasValue(!0))return g.getValue("0");c=c.parent}return null}};let TSpanElement=class TSpanElement extends TextElement{constructor(h,c,g){super(h,c,new.target===TSpanElement||g),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}};let TextNode=class TextNode extends TSpanElement{constructor(){super(...arguments),this.type="textNode"}};let SVGElement=class SVGElement extends RenderedElement{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(h){var c,{document:g}=this,{screen:d,window:f}=g,x=h.canvas;if(d.setDefaults(h),x.style&&void 0!==h.font&&f&&void 0!==f.getComputedStyle){h.font=f.getComputedStyle(x).getPropertyValue("font");var E=new Property(g,"fontSize",Font.parse(h.font).fontSize);E.hasValue()&&(g.rootEmSize=E.getPixels("y"),g.emSize=g.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:P,height:b}=d.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var S=this.getAttribute("refX"),T=this.getAttribute("refY"),C=this.getAttribute("viewBox"),A=C.hasValue()?toNumbers(C.getString()):null,w=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),M=0,N=0,_=0,V=0;A&&(M=A[0],N=A[1]),this.root||(P=this.getStyle("width").getPixels("x"),b=this.getStyle("height").getPixels("y"),"marker"!==this.type||(_=M,V=N,M=0,N=0)),d.viewPort.setCurrent(P,b),this.node&&(!this.parent||(null===(c=this.node.parentNode)||void 0===c?void 0:c.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(h),h.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),A&&(P=A[2],b=A[3]),g.setViewBox({ctx:h,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:d.viewPort.width,desiredWidth:P,height:d.viewPort.height,desiredHeight:b,minX:M,minY:N,refX:S.getValue(),refY:T.getValue(),clip:w,clipX:_,clipY:V}),A&&(d.viewPort.removeCurrent(),d.viewPort.setCurrent(P,b))}clearContext(h){super.clearContext(h),this.document.screen.viewPort.removeCurrent()}resize(h){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,g=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=this.getAttribute("width",!0),f=this.getAttribute("height",!0),x=this.getAttribute("viewBox"),E=this.getAttribute("style"),P=d.getNumber(0),b=f.getNumber(0);if(g){if("string"==typeof g)this.getAttribute("preserveAspectRatio",!0).setValue(g);else{var S=this.getAttribute("preserveAspectRatio");S.hasValue()&&S.setValue(S.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}}if(d.setValue(h),f.setValue(c),x.hasValue()||x.setValue("0 0 ".concat(P||h," ").concat(b||c)),E.hasValue()){var T=this.getStyle("width"),C=this.getStyle("height");T.hasValue()&&T.setValue("".concat(h,"px")),C.hasValue()&&C.setValue("".concat(c,"px"))}}};let RectElement=class RectElement extends PathElement{constructor(){super(...arguments),this.type="rect"}path(h){var c=this.getAttribute("x").getPixels("x"),g=this.getAttribute("y").getPixels("y"),d=this.getStyle("width",!1,!0).getPixels("x"),f=this.getStyle("height",!1,!0).getPixels("y"),x=this.getAttribute("rx"),E=this.getAttribute("ry"),P=x.getPixels("x"),b=E.getPixels("y");if(x.hasValue()&&!E.hasValue()&&(b=P),E.hasValue()&&!x.hasValue()&&(P=b),P=Math.min(P,d/2),b=Math.min(b,f/2),h){var S=4*((Math.sqrt(2)-1)/3);h.beginPath(),f>0&&d>0&&(h.moveTo(c+P,g),h.lineTo(c+d-P,g),h.bezierCurveTo(c+d-P+S*P,g,c+d,g+b-S*b,c+d,g+b),h.lineTo(c+d,g+f-b),h.bezierCurveTo(c+d,g+f-b+S*b,c+d-P+S*P,g+f,c+d-P,g+f),h.lineTo(c+P,g+f),h.bezierCurveTo(c+P-S*P,g+f,c,g+f-b+S*b,c,g+f-b),h.lineTo(c,g+b),h.bezierCurveTo(c,g+b-S*b,c+P-S*P,g,c+P,g),h.closePath())}return new BoundingBox(c,g,c+d,g+f)}getMarkers(){return null}};let CircleElement=class CircleElement extends PathElement{constructor(){super(...arguments),this.type="circle"}path(h){var c=this.getAttribute("cx").getPixels("x"),g=this.getAttribute("cy").getPixels("y"),d=this.getAttribute("r").getPixels();return h&&d>0&&(h.beginPath(),h.arc(c,g,d,0,2*Math.PI,!1),h.closePath()),new BoundingBox(c-d,g-d,c+d,g+d)}getMarkers(){return null}};let EllipseElement=class EllipseElement extends PathElement{constructor(){super(...arguments),this.type="ellipse"}path(h){var c=4*((Math.sqrt(2)-1)/3),g=this.getAttribute("rx").getPixels("x"),d=this.getAttribute("ry").getPixels("y"),f=this.getAttribute("cx").getPixels("x"),x=this.getAttribute("cy").getPixels("y");return h&&g>0&&d>0&&(h.beginPath(),h.moveTo(f+g,x),h.bezierCurveTo(f+g,x+c*d,f+c*g,x+d,f,x+d),h.bezierCurveTo(f-c*g,x+d,f-g,x+c*d,f-g,x),h.bezierCurveTo(f-g,x-c*d,f-c*g,x-d,f,x-d),h.bezierCurveTo(f+c*g,x-d,f+g,x-c*d,f+g,x),h.closePath()),new BoundingBox(f-g,x-d,f+g,x+d)}getMarkers(){return null}};let LineElement=class LineElement extends PathElement{constructor(){super(...arguments),this.type="line"}getPoints(){return[new Point(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Point(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(h){var[{x:c,y:g},{x:d,y:f}]=this.getPoints();return h&&(h.beginPath(),h.moveTo(c,g),h.lineTo(d,f)),new BoundingBox(c,g,d,f)}getMarkers(){var[h,c]=this.getPoints(),g=h.angleTo(c);return[[h,g],[c,g]]}};let PolylineElement=class PolylineElement extends PathElement{constructor(h,c,g){super(h,c,g),this.type="polyline",this.points=[],this.points=Point.parsePath(this.getAttribute("points").getString())}path(h){var{points:c}=this,[{x:g,y:d}]=c,f=new BoundingBox(g,d);return h&&(h.beginPath(),h.moveTo(g,d)),c.forEach(c=>{var{x:g,y:d}=c;f.addPoint(g,d),h&&h.lineTo(g,d)}),f}getMarkers(){var{points:h}=this,c=h.length-1,g=[];return h.forEach((d,f)=>{f!==c&&g.push([d,d.angleTo(h[f+1])])}),g.length>0&&g.push([h[h.length-1],g[g.length-1][1]]),g}};let PolygonElement=class PolygonElement extends PolylineElement{constructor(){super(...arguments),this.type="polygon"}path(h){var c=super.path(h),[{x:g,y:d}]=this.points;return h&&(h.lineTo(g,d),h.closePath()),c}};let PatternElement=class PatternElement extends Element{constructor(){super(...arguments),this.type="pattern"}createPattern(h,c,g){var d=this.getStyle("width").getPixels("x",!0),f=this.getStyle("height").getPixels("y",!0),x=new SVGElement(this.document,null);x.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),x.attributes.width=new Property(this.document,"width","".concat(d,"px")),x.attributes.height=new Property(this.document,"height","".concat(f,"px")),x.attributes.transform=new Property(this.document,"transform",this.getAttribute("patternTransform").getValue()),x.children=this.children;var E=this.document.createCanvas(d,f),P=E.getContext("2d"),b=this.getAttribute("x"),S=this.getAttribute("y");b.hasValue()&&S.hasValue()&&P.translate(b.getPixels("x",!0),S.getPixels("y",!0)),g.hasValue()?this.styles["fill-opacity"]=g:Reflect.deleteProperty(this.styles,"fill-opacity");for(var T=-1;T<=1;T++)for(var C=-1;C<=1;C++)P.save(),x.attributes.x=new Property(this.document,"x",T*E.width),x.attributes.y=new Property(this.document,"y",C*E.height),x.render(P),P.restore();return h.createPattern(E,"repeat")}};let MarkerElement=class MarkerElement extends Element{constructor(){super(...arguments),this.type="marker"}render(h,c,g){if(c){var{x:d,y:f}=c,x=this.getAttribute("orient").getString("auto"),E=this.getAttribute("markerUnits").getString("strokeWidth");h.translate(d,f),"auto"===x&&h.rotate(g),"strokeWidth"===E&&h.scale(h.lineWidth,h.lineWidth),h.save();var P=new SVGElement(this.document,null);P.type=this.type,P.attributes.viewBox=new Property(this.document,"viewBox",this.getAttribute("viewBox").getValue()),P.attributes.refX=new Property(this.document,"refX",this.getAttribute("refX").getValue()),P.attributes.refY=new Property(this.document,"refY",this.getAttribute("refY").getValue()),P.attributes.width=new Property(this.document,"width",this.getAttribute("markerWidth").getValue()),P.attributes.height=new Property(this.document,"height",this.getAttribute("markerHeight").getValue()),P.attributes.overflow=new Property(this.document,"overflow",this.getAttribute("overflow").getValue()),P.attributes.fill=new Property(this.document,"fill",this.getAttribute("fill").getColor("black")),P.attributes.stroke=new Property(this.document,"stroke",this.getAttribute("stroke").getValue("none")),P.children=this.children,P.render(h),h.restore(),"strokeWidth"===E&&h.scale(1/h.lineWidth,1/h.lineWidth),"auto"===x&&h.rotate(-g),h.translate(-d,-f)}}};let DefsElement=class DefsElement extends Element{constructor(){super(...arguments),this.type="defs"}render(){}};let GElement=class GElement extends RenderedElement{constructor(){super(...arguments),this.type="g"}getBoundingBox(h){var c=new BoundingBox;return this.children.forEach(g=>{c.addBoundingBox(g.getBoundingBox(h))}),c}};let GradientElement=class GradientElement extends Element{constructor(h,c,g){super(h,c,g),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:d,children:f}=this;f.forEach(h=>{"stop"===h.type&&d.push(h)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(h,c,g){var d=this;this.getHrefAttribute().hasValue()&&(d=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(d));var{stops:f}=d,x=this.getGradient(h,c);if(!x)return this.addParentOpacity(g,f[f.length-1].color);if(f.forEach(h=>{x.addColorStop(h.offset,this.addParentOpacity(g,h.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:E}=this,{MAX_VIRTUAL_PIXELS:P,viewPort:b}=E.screen,[S]=b.viewPorts,T=new RectElement(E,null);T.attributes.x=new Property(E,"x",-P/3),T.attributes.y=new Property(E,"y",-P/3),T.attributes.width=new Property(E,"width",P),T.attributes.height=new Property(E,"height",P);var C=new GElement(E,null);C.attributes.transform=new Property(E,"transform",this.getAttribute("gradientTransform").getValue()),C.children=[T];var A=new SVGElement(E,null);A.attributes.x=new Property(E,"x",0),A.attributes.y=new Property(E,"y",0),A.attributes.width=new Property(E,"width",S.width),A.attributes.height=new Property(E,"height",S.height),A.children=[C];var w=E.createCanvas(S.width,S.height),M=w.getContext("2d");return M.fillStyle=x,A.render(M),M.createPattern(w,"no-repeat")}return x}inheritStopContainer(h){this.attributesToInherit.forEach(c=>{!this.getAttribute(c).hasValue()&&h.getAttribute(c).hasValue()&&this.getAttribute(c,!0).setValue(h.getAttribute(c).getValue())})}addParentOpacity(h,c){return h.hasValue()?new Property(this.document,"color",c).addOpacity(h).getColor():c}};let LinearGradientElement=class LinearGradientElement extends GradientElement{constructor(h,c,g){super(h,c,g),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(h,c){var g="objectBoundingBox"===this.getGradientUnits(),d=g?c.getBoundingBox(h):null;if(g&&!d)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var f=g?d.x+d.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),x=g?d.y+d.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),E=g?d.x+d.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),P=g?d.y+d.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return f===E&&x===P?null:h.createLinearGradient(f,x,E,P)}};let RadialGradientElement=class RadialGradientElement extends GradientElement{constructor(h,c,g){super(h,c,g),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(h,c){var g="objectBoundingBox"===this.getGradientUnits(),d=c.getBoundingBox(h);if(g&&!d)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var f=g?d.x+d.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),x=g?d.y+d.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),E=f,P=x;this.getAttribute("fx").hasValue()&&(E=g?d.x+d.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(P=g?d.y+d.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var b=g?(d.width+d.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),S=this.getAttribute("fr").getPixels();return h.createRadialGradient(E,P,S,f,x,b)}};let StopElement=class StopElement extends Element{constructor(h,c,g){super(h,c,g),this.type="stop";var d=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),f=this.getStyle("stop-opacity"),x=this.getStyle("stop-color",!0);""===x.getString()&&x.setValue("#000"),f.hasValue()&&(x=x.addOpacity(f)),this.offset=d,this.color=x.getColor()}};let AnimateElement=class AnimateElement extends Element{constructor(h,c,g){super(h,c,g),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,h.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Property(h,"values",null);var d=this.getAttribute("values");d.hasValue()&&this.values.setValue(d.getString().split(";"))}getProperty(){var h=this.getAttribute("attributeType").getString(),c=this.getAttribute("attributeName").getString();return"CSS"===h?this.parent.getStyle(c,!0):this.parent.getAttribute(c,!0)}calcValue(){var{initialUnits:h}=this,{progress:c,from:g,to:d}=this.getProgress(),f=g.getNumber()+(d.getNumber()-g.getNumber())*c;return"%"===h&&(f*=100),"".concat(f).concat(h)}update(h){var{parent:c}=this,g=this.getProperty();if(this.initialValue||(this.initialValue=g.getString(),this.initialUnits=g.getUnits()),this.duration>this.maxDuration){var d=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==d||this.frozen){if("remove"===d&&!this.removed)return this.removed=!0,g.setValue(c.animationFrozen?c.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,c.animationFrozen=!0,c.animationFrozenValue=g.getString();return!1}this.duration+=h;var f=!1;if(this.begin<this.duration){var x=this.calcValue(),E=this.getAttribute("type");if(E.hasValue()){var P=E.getString();x="".concat(P,"(").concat(x,")")}g.setValue(x),f=!0}return f}getProgress(){var{document:h,values:c}=this,g={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(c.hasValue()){var d=g.progress*(c.getValue().length-1),f=Math.floor(d),x=Math.ceil(d);g.from=new Property(h,"from",parseFloat(c.getValue()[f])),g.to=new Property(h,"to",parseFloat(c.getValue()[x])),g.progress=(d-f)/(x-f)}else g.from=this.from,g.to=this.to;return g}};let AnimateColorElement=class AnimateColorElement extends AnimateElement{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:h,from:c,to:g}=this.getProgress(),d=new E(c.getColor()),f=new E(g.getColor());if(d.ok&&f.ok){var x=d.r+(f.r-d.r)*h,P=d.g+(f.g-d.g)*h,b=d.b+(f.b-d.b)*h;return"rgb(".concat(Math.floor(x),", ").concat(Math.floor(P),", ").concat(Math.floor(b),")")}return this.getAttribute("from").getColor()}};let AnimateTransformElement=class AnimateTransformElement extends AnimateElement{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:h,from:c,to:g}=this.getProgress(),d=toNumbers(c.getString()),f=toNumbers(g.getString());return d.map((c,g)=>c+(f[g]-c)*h).join(" ")}};let FontElement=class FontElement extends Element{constructor(h,c,g){super(h,c,g),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:d}=h,{children:f}=this;for(var x of f)switch(x.type){case"font-face":this.fontFace=x;var E=x.getStyle("font-family");E.hasValue()&&(d[E.getString()]=this);break;case"missing-glyph":this.missingGlyph=x;break;case"glyph":x.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[x.unicode]&&(this.glyphs[x.unicode]={}),this.glyphs[x.unicode][x.arabicForm]=x):this.glyphs[x.unicode]=x}}render(){}};let FontFaceElement=class FontFaceElement extends Element{constructor(h,c,g){super(h,c,g),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}};let MissingGlyphElement=class MissingGlyphElement extends PathElement{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}};let TRefElement=class TRefElement extends TextElement{constructor(){super(...arguments),this.type="tref"}getText(){var h=this.getHrefAttribute().getDefinition();if(h){var c=h.children[0];if(c)return c.getText()}return""}};let AElement=class AElement extends TextElement{constructor(h,c,g){super(h,c,g),this.type="a";var{childNodes:d}=c,f=d[0],x=d.length>0&&Array.from(d).every(h=>3===h.nodeType);this.hasText=x,this.text=x?this.getTextFromNode(f):""}getText(){return this.text}renderChildren(h){if(this.hasText){super.renderChildren(h);var{document:c,x:g,y:d}=this,{mouse:f}=c.screen,x=new Property(c,"fontSize",Font.parse(c.ctx.font).fontSize);f.isWorking()&&f.checkBoundingBox(this,new BoundingBox(g,d-x.getPixels("y"),g+this.measureText(h),d))}else if(this.children.length>0){var E=new GElement(this.document,null);E.children=this.children,E.parent=this,E.render(h)}}onClick(){var{window:h}=this.document;h&&h.open(this.getHrefAttribute().getString())}onMouseMove(){this.document.ctx.canvas.style.cursor="pointer"}};function ownKeys$2(h,c){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(h);c&&(d=d.filter(function(c){return Object.getOwnPropertyDescriptor(h,c).enumerable})),g.push.apply(g,d)}return g}function _objectSpread$2(h){for(var c=1;c<arguments.length;c++){var g=null!=arguments[c]?arguments[c]:{};c%2?ownKeys$2(Object(g),!0).forEach(function(c){f(h,c,g[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):ownKeys$2(Object(g)).forEach(function(c){Object.defineProperty(h,c,Object.getOwnPropertyDescriptor(g,c))})}return h}let TextPathElement=class TextPathElement extends TextElement{constructor(h,c,g){super(h,c,g),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var d=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(d)}getText(){return this.text}path(h){var{dataArray:c}=this;h&&h.beginPath(),c.forEach(c=>{var{type:g,points:d}=c;switch(g){case PathParser.LINE_TO:h&&h.lineTo(d[0],d[1]);break;case PathParser.MOVE_TO:h&&h.moveTo(d[0],d[1]);break;case PathParser.CURVE_TO:h&&h.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5]);break;case PathParser.QUAD_TO:h&&h.quadraticCurveTo(d[0],d[1],d[2],d[3]);break;case PathParser.ARC:var[f,x,E,P,b,S,T,C]=d,A=E>P?1:E/P,w=E>P?P/E:1;h&&(h.translate(f,x),h.rotate(T),h.scale(A,w),h.arc(0,0,E>P?E:P,b,b+S,!!(1-C)),h.scale(1/A,1/w),h.rotate(-T),h.translate(-f,-x));break;case PathParser.CLOSE_PATH:h&&h.closePath()}})}renderChildren(h){this.setTextData(h),h.save();var c=this.parent.getStyle("text-decoration").getString(),g=this.getFontSize(),{glyphInfo:d}=this,f=h.fillStyle;"underline"===c&&h.beginPath(),d.forEach((d,f)=>{var{p0:x,p1:E,rotation:P,text:b}=d;h.save(),h.translate(x.x,x.y),h.rotate(P),h.fillStyle&&h.fillText(b,0,0),h.strokeStyle&&h.strokeText(b,0,0),h.restore(),"underline"===c&&(0===f&&h.moveTo(x.x,x.y+g/8),h.lineTo(E.x,E.y+g/5))}),"underline"===c&&(h.lineWidth=g/20,h.strokeStyle=f,h.stroke(),h.closePath()),h.restore()}getLetterSpacingAt(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[h]||0}findSegmentToFitChar(h,c,g,d,f,x,E,P,b){var S=x,T=this.measureText(h,P);" "===P&&"justify"===c&&g<d&&(T+=(d-g)/f),b>-1&&(S+=this.getLetterSpacingAt(b));var C=this.textHeight/20,A=this.getEquidistantPointOnPath(S,C,0),w=this.getEquidistantPointOnPath(S+T,C,0),M={p0:A,p1:w},N=A&&w?Math.atan2(w.y-A.y,w.x-A.x):0;if(E){var _=Math.cos(Math.PI/2+N)*E,V=Math.cos(-N)*E;M.p0=_objectSpread$2(_objectSpread$2({},A),{},{x:A.x+_,y:A.y+V}),M.p1=_objectSpread$2(_objectSpread$2({},w),{},{x:w.x+_,y:w.y+V})}return{offset:S+=T,segment:M,rotation:N}}measureText(h,c){var{measuresCache:g}=this,d=c||this.getText();if(g.has(d))return g.get(d);var f=this.measureTargetText(h,d);return g.set(d,f),f}setTextData(h){if(!this.glyphInfo){var c=this.getText(),g=c.split(""),d=c.split(" ").length-1,f=this.parent.getAttribute("dx").split().map(h=>h.getPixels("x")),x=this.parent.getAttribute("dy").getPixels("y"),E=this.parent.getStyle("text-anchor").getString("start"),P=this.getStyle("letter-spacing"),b=this.parent.getStyle("letter-spacing"),S=0;P.hasValue()&&"inherit"!==P.getValue()?P.hasValue()&&"initial"!==P.getValue()&&"unset"!==P.getValue()&&(S=P.getPixels()):S=b.getPixels();var T=[],C=c.length;this.letterSpacingCache=T;for(var A=0;A<C;A++)T.push(void 0!==f[A]?f[A]:S);var w=T.reduce((h,c,g)=>0===g?0:h+c||0,0),M=this.measureText(h),N=Math.max(M+w,0);this.textWidth=M,this.textHeight=this.getFontSize(),this.glyphInfo=[];var _=this.getPathLength(),V=this.getStyle("startOffset").getNumber(0)*_,R=0;("middle"===E||"center"===E)&&(R=-N/2),("end"===E||"right"===E)&&(R=-N),R+=V,g.forEach((c,f)=>{var{offset:P,segment:b,rotation:S}=this.findSegmentToFitChar(h,E,N,_,d,R,x,c,f);R=P,b.p0&&b.p1&&this.glyphInfo.push({text:g[f],p0:b.p0,p1:b.p1,rotation:S})})}}parsePathData(h){if(this.pathLength=-1,!h)return[];var c=[],{pathParser:g}=h;for(g.reset();!g.isEnd();){var{current:d}=g,f=d?d.x:0,x=d?d.y:0,E=g.next(),P=E.type,b=[];switch(E.type){case PathParser.MOVE_TO:this.pathM(g,b);break;case PathParser.LINE_TO:P=this.pathL(g,b);break;case PathParser.HORIZ_LINE_TO:P=this.pathH(g,b);break;case PathParser.VERT_LINE_TO:P=this.pathV(g,b);break;case PathParser.CURVE_TO:this.pathC(g,b);break;case PathParser.SMOOTH_CURVE_TO:P=this.pathS(g,b);break;case PathParser.QUAD_TO:this.pathQ(g,b);break;case PathParser.SMOOTH_QUAD_TO:P=this.pathT(g,b);break;case PathParser.ARC:b=this.pathA(g);break;case PathParser.CLOSE_PATH:PathElement.pathZ(g)}E.type!==PathParser.CLOSE_PATH?c.push({type:P,points:b,start:{x:f,y:x},pathLength:this.calcLength(f,x,P,b)}):c.push({type:PathParser.CLOSE_PATH,points:[],pathLength:0})}return c}pathM(h,c){var{x:g,y:d}=PathElement.pathM(h).point;c.push(g,d)}pathL(h,c){var{x:g,y:d}=PathElement.pathL(h).point;return c.push(g,d),PathParser.LINE_TO}pathH(h,c){var{x:g,y:d}=PathElement.pathH(h).point;return c.push(g,d),PathParser.LINE_TO}pathV(h,c){var{x:g,y:d}=PathElement.pathV(h).point;return c.push(g,d),PathParser.LINE_TO}pathC(h,c){var{point:g,controlPoint:d,currentPoint:f}=PathElement.pathC(h);c.push(g.x,g.y,d.x,d.y,f.x,f.y)}pathS(h,c){var{point:g,controlPoint:d,currentPoint:f}=PathElement.pathS(h);return c.push(g.x,g.y,d.x,d.y,f.x,f.y),PathParser.CURVE_TO}pathQ(h,c){var{controlPoint:g,currentPoint:d}=PathElement.pathQ(h);c.push(g.x,g.y,d.x,d.y)}pathT(h,c){var{controlPoint:g,currentPoint:d}=PathElement.pathT(h);return c.push(g.x,g.y,d.x,d.y),PathParser.QUAD_TO}pathA(h){var{rX:c,rY:g,sweepFlag:d,xAxisRotation:f,centp:x,a1:E,ad:P}=PathElement.pathA(h);return 0===d&&P>0&&(P-=2*Math.PI),1===d&&P<0&&(P+=2*Math.PI),[x.x,x.y,c,g,E,P,f,d]}calcLength(h,c,g,d){var f=0,x=null,E=null,P=0;switch(g){case PathParser.LINE_TO:return this.getLineLength(h,c,d[0],d[1]);case PathParser.CURVE_TO:for(P=.01,f=0,x=this.getPointOnCubicBezier(0,h,c,d[0],d[1],d[2],d[3],d[4],d[5]);P<=1;P+=.01)E=this.getPointOnCubicBezier(P,h,c,d[0],d[1],d[2],d[3],d[4],d[5]),f+=this.getLineLength(x.x,x.y,E.x,E.y),x=E;return f;case PathParser.QUAD_TO:for(P=.01,f=0,x=this.getPointOnQuadraticBezier(0,h,c,d[0],d[1],d[2],d[3]);P<=1;P+=.01)E=this.getPointOnQuadraticBezier(P,h,c,d[0],d[1],d[2],d[3]),f+=this.getLineLength(x.x,x.y,E.x,E.y),x=E;return f;case PathParser.ARC:f=0;var b=d[4],S=d[5],T=d[4]+S,C=Math.PI/180;if(Math.abs(b-T)<C&&(C=Math.abs(b-T)),x=this.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],b,0),S<0)for(P=b-C;P>T;P-=C)E=this.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],P,0),f+=this.getLineLength(x.x,x.y,E.x,E.y),x=E;else for(P=b+C;P<T;P+=C)E=this.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],P,0),f+=this.getLineLength(x.x,x.y,E.x,E.y),x=E;return E=this.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],T,0),f+=this.getLineLength(x.x,x.y,E.x,E.y)}return 0}getPointOnLine(h,c,g,d,f){var x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c,E=arguments.length>6&&void 0!==arguments[6]?arguments[6]:g,P=(f-g)/(d-c+U),b=Math.sqrt(h*h/(1+P*P));d<c&&(b*=-1);var S=P*b,T=null;if(d===c)T={x:x,y:E+S};else if((E-g)/(x-c+U)===P)T={x:x+b,y:E+S};else{var C=0,A=0,w=this.getLineLength(c,g,d,f);if(w<U)return null;var M=(x-c)*(d-c)+(E-g)*(f-g);M/=w*w,C=c+M*(d-c),A=g+M*(f-g);var N=this.getLineLength(x,E,C,A),_=Math.sqrt(h*h-N*N);b=Math.sqrt(_*_/(1+P*P)),d<c&&(b*=-1),S=P*b,T={x:C+b,y:A+S}}return T}getPointOnPath(h){var c=this.getPathLength(),g=0,d=null;if(h<-.00005||h-5e-5>c)return null;var{dataArray:f}=this;for(var x of f){if(x&&(x.pathLength<5e-5||g+x.pathLength+5e-5<h)){g+=x.pathLength;continue}var E=h-g,P=0;switch(x.type){case PathParser.LINE_TO:d=this.getPointOnLine(E,x.start.x,x.start.y,x.points[0],x.points[1],x.start.x,x.start.y);break;case PathParser.ARC:var b=x.points[4],S=x.points[5],T=x.points[4]+S;if(P=b+E/x.pathLength*S,S<0&&P<T||S>=0&&P>T)break;d=this.getPointOnEllipticalArc(x.points[0],x.points[1],x.points[2],x.points[3],P,x.points[6]);break;case PathParser.CURVE_TO:(P=E/x.pathLength)>1&&(P=1),d=this.getPointOnCubicBezier(P,x.start.x,x.start.y,x.points[0],x.points[1],x.points[2],x.points[3],x.points[4],x.points[5]);break;case PathParser.QUAD_TO:(P=E/x.pathLength)>1&&(P=1),d=this.getPointOnQuadraticBezier(P,x.start.x,x.start.y,x.points[0],x.points[1],x.points[2],x.points[3])}if(d)return d;break}return null}getLineLength(h,c,g,d){return Math.sqrt((g-h)*(g-h)+(d-c)*(d-c))}getPathLength(){return -1===this.pathLength&&(this.pathLength=this.dataArray.reduce((h,c)=>c.pathLength>0?h+c.pathLength:h,0)),this.pathLength}getPointOnCubicBezier(h,c,g,d,f,x,E,P,b){return{x:P*CB1(h)+x*CB2(h)+d*CB3(h)+c*CB4(h),y:b*CB1(h)+E*CB2(h)+f*CB3(h)+g*CB4(h)}}getPointOnQuadraticBezier(h,c,g,d,f,x,E){return{x:x*(h*h)+d*QB2(h)+c*QB3(h),y:E*(h*h)+f*QB2(h)+g*QB3(h)}}getPointOnEllipticalArc(h,c,g,d,f,x){var E=Math.cos(x),P=Math.sin(x),b={x:g*Math.cos(f),y:d*Math.sin(f)};return{x:h+(b.x*E-b.y*P),y:c+(b.x*P+b.y*E)}}buildEquidistantCache(h,c){var g=this.getPathLength(),d=c||.25,f=h||g/100;if(!this.equidistantCache||this.equidistantCache.step!==f||this.equidistantCache.precision!==d){this.equidistantCache={step:f,precision:d,points:[]};for(var x=0,E=0;E<=g;E+=d){var P=this.getPointOnPath(E),b=this.getPointOnPath(E+d);P&&b&&(x+=this.getLineLength(P.x,P.y,b.x,b.y))>=f&&(this.equidistantCache.points.push({x:P.x,y:P.y,distance:E}),x-=f)}}}getEquidistantPointOnPath(h,c,g){if(this.buildEquidistantCache(c,g),h<0||h-this.getPathLength()>5e-5)return null;var d=Math.round(h/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[d]||null}};var Q=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;let ImageElement=class ImageElement extends RenderedElement{constructor(h,c,g){super(h,c,g),this.type="image",this.loaded=!1;var d=this.getHrefAttribute().getString();if(!d)return;var f=d.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(d);h.images.push(this),f?this.loadSvg(d):this.loadImage(d),this.isSvg=f}loadImage(h){var c=this;return d(function*(){try{var g=yield c.document.createImage(h);c.image=g}catch(c){console.error('Error while loading image "'.concat(h,'":'),c)}c.loaded=!0})()}loadSvg(h){var c=this;return d(function*(){var g=Q.exec(h);if(g){var d=g[5];"base64"===g[4]?c.image=atob(d):c.image=decodeURIComponent(d)}else try{var f=yield c.document.fetch(h),x=yield f.text();c.image=x}catch(c){console.error('Error while loading image "'.concat(h,'":'),c)}c.loaded=!0})()}renderChildren(h){var{document:c,image:g,loaded:d}=this,f=this.getAttribute("x").getPixels("x"),x=this.getAttribute("y").getPixels("y"),E=this.getStyle("width").getPixels("x"),P=this.getStyle("height").getPixels("y");if(d&&g&&E&&P){if(h.save(),h.translate(f,x),this.isSvg){var b=c.canvg.forkString(h,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:E,scaleHeight:P});b.document.documentElement.parent=this,b.render()}else{var S=this.image;c.setViewBox({ctx:h,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:E,desiredWidth:S.width,height:P,desiredHeight:S.height}),this.loaded&&(void 0===S.complete||S.complete)&&h.drawImage(S,0,0)}h.restore()}}getBoundingBox(){var h=this.getAttribute("x").getPixels("x"),c=this.getAttribute("y").getPixels("y");return new BoundingBox(h,c,h+this.getStyle("width").getPixels("x"),c+this.getStyle("height").getPixels("y"))}};let SymbolElement=class SymbolElement extends RenderedElement{constructor(){super(...arguments),this.type="symbol"}render(h){}};let SVGFontLoader=class SVGFontLoader{constructor(h){this.document=h,this.loaded=!1,h.fonts.push(this)}load(h,c){var g=this;return d(function*(){try{var{document:d}=g,f=(yield d.canvg.parser.load(c)).getElementsByTagName("font");Array.from(f).forEach(c=>{var g=d.createElement(c);d.definitions[h]=g})}catch(h){console.error('Error while loading font "'.concat(c,'":'),h)}g.loaded=!0})()}};let StyleElement=class StyleElement extends Element{constructor(h,c,g){super(h,c,g),this.type="style",compressSpaces(Array.from(c.childNodes).map(h=>h.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(c=>{var g=c.trim();if(g){var d=g.split("{"),f=d[0].split(","),x=d[1].split(";");f.forEach(c=>{var g=c.trim();if(g){var d=h.styles[g]||{};if(x.forEach(c=>{var g=c.indexOf(":"),f=c.substr(0,g).trim(),x=c.substr(g+1,c.length-g).trim();f&&x&&(d[f]=new Property(h,f,x))}),h.styles[g]=d,h.stylesSpecificity[g]=getSelectorSpecificity(g),"@font-face"===g){var f=d["font-family"].getString().replace(/"|'/g,"");d.src.getString().split(",").forEach(c=>{if(c.indexOf('format("svg")')>0){var g=parseExternalUrl(c);g&&new SVGFontLoader(h).load(f,g)}})}}})}})}};StyleElement.parseExternalUrl=parseExternalUrl;let UseElement=class UseElement extends RenderedElement{constructor(){super(...arguments),this.type="use"}setContext(h){super.setContext(h);var c=this.getAttribute("x"),g=this.getAttribute("y");c.hasValue()&&h.translate(c.getPixels("x"),0),g.hasValue()&&h.translate(0,g.getPixels("y"))}path(h){var{element:c}=this;c&&c.path(h)}renderChildren(h){var{document:c,element:g}=this;if(g){var d=g;if("symbol"===g.type&&((d=new SVGElement(c,null)).attributes.viewBox=new Property(c,"viewBox",g.getAttribute("viewBox").getString()),d.attributes.preserveAspectRatio=new Property(c,"preserveAspectRatio",g.getAttribute("preserveAspectRatio").getString()),d.attributes.overflow=new Property(c,"overflow",g.getAttribute("overflow").getString()),d.children=g.children,g.styles.opacity=new Property(c,"opacity",this.calculateOpacity())),"svg"===d.type){var f=this.getStyle("width",!1,!0),x=this.getStyle("height",!1,!0);f.hasValue()&&(d.attributes.width=new Property(c,"width",f.getString())),x.hasValue()&&(d.attributes.height=new Property(c,"height",x.getString()))}var E=d.parent;d.parent=this,d.render(h),d.parent=E}}getBoundingBox(h){var{element:c}=this;return c?c.getBoundingBox(h):null}elementTransform(){var{document:h,element:c}=this;return Transform.fromElement(h,c)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}};function index_es_c(h,c,g,d){return c+Math.cos(h)*g+Math.sin(h)*d}let FeColorMatrixElement=class FeColorMatrixElement extends Element{constructor(h,c,g){super(h,c,g),this.type="feColorMatrix";var d=toNumbers(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":var f=d[0];d=[.213+.787*f,.715-.715*f,.072-.072*f,0,0,.213-.213*f,.715+.285*f,.072-.072*f,0,0,.213-.213*f,.715-.715*f,.072+.928*f,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var x=d[0]*Math.PI/180;d=[index_es_c(x,.213,.787,-.213),index_es_c(x,.715,-.715,-.715),index_es_c(x,.072,-.072,.928),0,0,index_es_c(x,.213,-.213,.143),index_es_c(x,.715,.285,.14),index_es_c(x,.072,-.072,-.283),0,0,index_es_c(x,.213,-.213,-.787),index_es_c(x,.715,-.715,.715),index_es_c(x,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.matrix=d,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(h,c,g,d,f){for(var{includeOpacity:x,matrix:E}=this,P=h.getImageData(0,0,d,f),b=0;b<f;b++)for(var S=0;S<d;S++){var T,C,A,w,M,N,_,V,R,k,L,B,D,F,z,U,X,Y,j,G,Q=P.data[b*d*4+4*S+0],W=P.data[b*d*4+4*S+1],q=P.data[b*d*4+4*S+2],$=P.data[b*d*4+4*S+3],Z=E[0]*Q+E[1]*W+E[2]*q+E[3]*$+1*E[4],K=E[5]*Q+E[6]*W+E[7]*q+E[8]*$+1*E[9],J=E[10]*Q+E[11]*W+E[12]*q+E[13]*$+1*E[14],tt=E[15]*Q+E[16]*W+E[17]*q+E[18]*$+1*E[19];x&&(Z=0,K=0,J=0,tt*=$/255),M=P.data,N=S,_=b,V=Z,M[_*d*4+4*N+0]=V,R=P.data,k=S,L=b,B=K,R[L*d*4+4*k+1]=B,D=P.data,F=S,z=b,U=J,D[z*d*4+4*F+2]=U,X=P.data,Y=S,j=b,G=tt,X[j*d*4+4*Y+3]=G}h.clearRect(0,0,d,f),h.putImageData(P,0,0)}};let MaskElement=class MaskElement extends Element{constructor(){super(...arguments),this.type="mask"}apply(h,c){var{document:g}=this,d=this.getAttribute("x").getPixels("x"),f=this.getAttribute("y").getPixels("y"),x=this.getStyle("width").getPixels("x"),E=this.getStyle("height").getPixels("y");if(!x&&!E){var P=new BoundingBox;this.children.forEach(c=>{P.addBoundingBox(c.getBoundingBox(h))}),d=Math.floor(P.x1),f=Math.floor(P.y1),x=Math.floor(P.width),E=Math.floor(P.height)}var b=this.removeStyles(c,MaskElement.ignoreStyles),S=g.createCanvas(d+x,f+E),T=S.getContext("2d");g.screen.setDefaults(T),this.renderChildren(T),new FeColorMatrixElement(g,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(T,0,0,d+x,f+E);var C=g.createCanvas(d+x,f+E),A=C.getContext("2d");g.screen.setDefaults(A),c.render(A),A.globalCompositeOperation="destination-in",A.fillStyle=T.createPattern(S,"no-repeat"),A.fillRect(0,0,d+x,f+E),h.fillStyle=A.createPattern(C,"no-repeat"),h.fillRect(0,0,d+x,f+E),this.restoreStyles(c,b)}render(h){}};MaskElement.ignoreStyles=["mask","transform","clip-path"];var noop=()=>{};let ClipPathElement=class ClipPathElement extends Element{constructor(){super(...arguments),this.type="clipPath"}apply(h){var{document:c}=this,g=Reflect.getPrototypeOf(h),{beginPath:d,closePath:f}=h;g&&(g.beginPath=noop,g.closePath=noop),Reflect.apply(d,h,[]),this.children.forEach(d=>{if(void 0!==d.path){var x=void 0!==d.elementTransform?d.elementTransform():null;x||(x=Transform.fromElement(c,d)),x&&x.apply(h),d.path(h),g&&(g.closePath=f),x&&x.unapply(h)}}),Reflect.apply(f,h,[]),h.clip(),g&&(g.beginPath=d,g.closePath=f)}render(h){}};let FilterElement=class FilterElement extends Element{constructor(){super(...arguments),this.type="filter"}apply(h,c){var{document:g,children:d}=this,f=c.getBoundingBox(h);if(f){var x=0,E=0;d.forEach(h=>{var c=h.extraFilterDistance||0;x=Math.max(x,c),E=Math.max(E,c)});var P=Math.floor(f.width),b=Math.floor(f.height),S=P+2*x,T=b+2*E;if(!(S<1)&&!(T<1)){var C=Math.floor(f.x),A=Math.floor(f.y),w=this.removeStyles(c,FilterElement.ignoreStyles),M=g.createCanvas(S,T),N=M.getContext("2d");g.screen.setDefaults(N),N.translate(-C+x,-A+E),c.render(N),d.forEach(h=>{"function"==typeof h.apply&&h.apply(N,0,0,S,T)}),h.drawImage(M,0,0,S,T,C-x,A-E,S,T),this.restoreStyles(c,w)}}}render(h){}};FilterElement.ignoreStyles=["filter","transform","clip-path"];let FeDropShadowElement=class FeDropShadowElement extends Element{constructor(h,c,g){super(h,c,g),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(h,c,g,d,f){}};let FeMorphologyElement=class FeMorphologyElement extends Element{constructor(){super(...arguments),this.type="feMorphology"}apply(h,c,g,d,f){}};let FeCompositeElement=class FeCompositeElement extends Element{constructor(){super(...arguments),this.type="feComposite"}apply(h,c,g,d,f){}};let FeGaussianBlurElement=class FeGaussianBlurElement extends Element{constructor(h,c,g){super(h,c,g),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(h,c,g,d,f){var{document:x,blurRadius:E}=this,P=x.window?x.window.document.body:null,b=h.canvas;b.id=x.getUniqueId(),P&&(b.style.display="none",P.appendChild(b)),(0,N.canvasRGBA)(b,c,g,d,f,E),P&&P.removeChild(b)}};let TitleElement=class TitleElement extends Element{constructor(){super(...arguments),this.type="title"}};let DescElement=class DescElement extends Element{constructor(){super(...arguments),this.type="desc"}};function ownKeys$1(h,c){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(h);c&&(d=d.filter(function(c){return Object.getOwnPropertyDescriptor(h,c).enumerable})),g.push.apply(g,d)}return g}function _objectSpread$1(h){for(var c=1;c<arguments.length;c++){var g=null!=arguments[c]?arguments[c]:{};c%2?ownKeys$1(Object(g),!0).forEach(function(c){f(h,c,g[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):ownKeys$1(Object(g)).forEach(function(c){Object.defineProperty(h,c,Object.getOwnPropertyDescriptor(g,c))})}return h}function createCanvas(h,c){var g=document.createElement("canvas");return g.width=h,g.height=c,g}function createImage(h){return _createImage.apply(this,arguments)}function _createImage(){return(_createImage=d(function*(h){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=document.createElement("img");return c&&(g.crossOrigin="Anonymous"),new Promise((c,d)=>{g.onload=()=>{c(g)},g.onerror=(h,c,g,f,x)=>{d(x)},g.src=h})})).apply(this,arguments)}let Document=class Document{constructor(h){var{rootEmSize:c=12,emSize:g=12,createCanvas:d=Document.createCanvas,createImage:f=Document.createImage,anonymousCrossOrigin:x}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canvg=h,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=h.screen,this.rootEmSize=c,this.emSize=g,this.createCanvas=d,this.createImage=this.bindCreateImage(f,x),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(h,c){return"boolean"==typeof c?(g,d)=>h(g,"boolean"==typeof d?d:c):h}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:h}=this;return h[h.length-1]}set emSize(h){var{emSizeStack:c}=this;c.push(h)}popEmSize(){var{emSizeStack:h}=this;h.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(h=>h.loaded)}isFontsLoaded(){return this.fonts.every(h=>h.loaded)}createDocumentElement(h){var c=this.createElement(h.documentElement);return c.root=!0,c.addStylesFromStyleDefinition(),this.documentElement=c,c}createElement(h){var c=h.nodeName.replace(/^[^:]+:/,""),g=Document.elementTypes[c];return void 0!==g?new g(this,h):new UnknownElement(this,h)}createTextNode(h){return new TextNode(this,h)}setViewBox(h){this.screen.setViewBox(_objectSpread$1({document:this},h))}};function ownKeys(h,c){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(h);c&&(d=d.filter(function(c){return Object.getOwnPropertyDescriptor(h,c).enumerable})),g.push.apply(g,d)}return g}function _objectSpread(h){for(var c=1;c<arguments.length;c++){var g=null!=arguments[c]?arguments[c]:{};c%2?ownKeys(Object(g),!0).forEach(function(c){f(h,c,g[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):ownKeys(Object(g)).forEach(function(c){Object.defineProperty(h,c,Object.getOwnPropertyDescriptor(g,c))})}return h}Document.createCanvas=createCanvas,Document.createImage=createImage,Document.elementTypes={svg:SVGElement,rect:RectElement,circle:CircleElement,ellipse:EllipseElement,line:LineElement,polyline:PolylineElement,polygon:PolygonElement,path:PathElement,pattern:PatternElement,marker:MarkerElement,defs:DefsElement,linearGradient:LinearGradientElement,radialGradient:RadialGradientElement,stop:StopElement,animate:AnimateElement,animateColor:AnimateColorElement,animateTransform:AnimateTransformElement,font:FontElement,"font-face":FontFaceElement,"missing-glyph":MissingGlyphElement,glyph:GlyphElement,text:TextElement,tspan:TSpanElement,tref:TRefElement,a:AElement,textPath:TextPathElement,image:ImageElement,g:GElement,symbol:SymbolElement,style:StyleElement,use:UseElement,mask:MaskElement,clipPath:ClipPathElement,filter:FilterElement,feDropShadow:FeDropShadowElement,feMorphology:FeMorphologyElement,feComposite:FeCompositeElement,feColorMatrix:FeColorMatrixElement,feGaussianBlur:FeGaussianBlurElement,title:TitleElement,desc:DescElement};let Canvg=class Canvg{constructor(h,c){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.parser=new Parser(g),this.screen=new Screen(h,g),this.options=g;var d=new Document(this,g),f=d.createDocumentElement(c);this.document=d,this.documentElement=f}static from(h,c){var g=arguments;return d(function*(){var d=g.length>2&&void 0!==g[2]?g[2]:{},f=new Parser(d);return new Canvg(h,(yield f.parse(c)),d)})()}static fromString(h,c){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Canvg(h,new Parser(g).parseFromString(c),g)}fork(h,c){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Canvg.from(h,c,_objectSpread(_objectSpread({},this.options),g))}forkString(h,c){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Canvg.fromString(h,c,_objectSpread(_objectSpread({},this.options),g))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var h=arguments,c=this;return d(function*(){var g=h.length>0&&void 0!==h[0]?h[0]:{};c.start(_objectSpread({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},g)),yield c.ready(),c.stop()})()}start(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{documentElement:c,screen:g,options:d}=this;g.start(c,_objectSpread(_objectSpread({enableRedraw:!0},d),h))}stop(){this.screen.stop()}resize(h){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(h,c,g)}}}};