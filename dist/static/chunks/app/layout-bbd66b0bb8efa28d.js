(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7817:function(e,t,n){Promise.resolve().then(n.bind(n,169))},9984:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(9222);let s=r.Z.create({baseURL:"http://197.243.18.48:8088/afropureapp/api/v1"})},6038:function(e,t,n){"use strict";n.d(t,{Ho:function(){return AuthProvider},ZP:function(){return useAuth}});var r=n(7437),s=n(4033),o=n(2265),i=n(171),u=n(9984),a=n(7713);let l=(0,o.createContext)({initialLoading:!0,loginWithEmailAndPassword:()=>{},loggingIn:!1}),AuthProvider=e=>{let{children:t}=e,n=(0,s.useRouter)(),c=(0,s.usePathname)(),[d,h]=(0,o.useState)(null),[g,A]=(0,o.useState)(!0),[f,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{"/login"===c&&A(!1),d?A(!1):(n.push("/login"),setTimeout(()=>{A(!1)},300))},[c]);let loginWithEmailAndPassword=async(e,t)=>{m(!0);try{let r=await u.o.post("/auth/signin",{login:e,password:t});if(console.log("response from backend : ",r),200===r.status){let e=r.data;h({login:e.login,password:e.password}),(0,a.setCookie)("accessToken",e.accessToken),localStorage.setItem("user",JSON.stringify(e)),i.Am.success("Logged in successfully"),n.push("/dashboard")}else i.Am.error("Login failed. Please check your credentials.")}catch(e){console.error("Login error:",e),i.Am.error("Login failed. Please check your credentials.")}finally{m(!1)}},logout=()=>{h(null),n.push("/login")},x=(0,o.useMemo)(()=>({loginWithEmailAndPassword,initialLoading:g,logout,loggingIn:f}),[g,d,f]);return(0,r.jsx)(l.Provider,{value:x,children:t})};function useAuth(){let e=(0,o.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1247:function(e,t,n){"use strict";n.d(t,{xq:function(){return useFarmersContext}});var r=n(7437),s=n(2265);let o=(0,s.createContext)({});t.ZP=e=>{let{children:t}=e,[n,i]=(0,s.useState)();return(0,r.jsx)(o.Provider,{value:{farmers:n,setFarmers:i,onClose:()=>{}},children:t})};let useFarmersContext=()=>(0,s.useContext)(o)},169:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return RootLayout}});var r=n(7437),s=n(2265),o=n(6038),i=n(6691),u=n.n(i),a=n(261);function WelcomePage(){return(0,r.jsx)("main",{className:"flex w-sreen h-screen items-center justify-center bg-bg",children:(0,r.jsx)("div",{className:"w-fit h-fit animate-bounce ",children:(0,r.jsx)(u(),{src:a.Z,height:200,width:200,alt:"logo"})})})}function MainLayout(e){let{children:t}=e,{initialLoading:n}=(0,o.ZP)();return(0,r.jsx)("div",{children:n?(0,r.jsx)(WelcomePage,{}):t})}var l=n(1247);function RootLayout(e){let{children:t}=e;return(0,r.jsx)(s.Fragment,{children:(0,r.jsx)(l.ZP,{children:(0,r.jsx)(o.Ho,{children:(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{children:(0,r.jsx)(MainLayout,{children:t})})})})})})}},261:function(e,t){"use strict";t.Z={src:"/_next/static/media/afropurelogo.e49b8f02.png",height:130,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAAQUlEQVR4nA3KMQ6AIBBE0b8sFzBaeP+DWWtnMSFIWJD+2dA96QVLTonEI3FsJxEdzLDxXgvUBQy1hvLOV8UE3DM/8McbczXVE5oAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}}},function(e){e.O(0,[236,416,971,472,744],function(){return e(e.s=7817)}),_N_E=e.O()}]);