(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{8893:function(){},5821:function(){},7252:function(){},4863:function(){},3123:function(){},3913:function(){},7563:function(e,t,s){Promise.resolve().then(s.bind(s,3696))},9984:function(e,t,s){"use strict";s.d(t,{o:function(){return a}});var l=s(9222);let a=l.Z.create({baseURL:"http://197.243.18.48:8088/afropureapp/api/v1"})},1247:function(e,t,s){"use strict";s.d(t,{xq:function(){return useFarmersContext}});var l=s(7437),a=s(2265);let r=(0,a.createContext)({});t.ZP=e=>{let{children:t}=e,[s,n]=(0,a.useState)();return(0,l.jsx)(r.Provider,{value:{farmers:s,setFarmers:n,onClose:()=>{}},children:t})};let useFarmersContext=()=>(0,a.useContext)(r)},3696:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return page}});var l=s(7437),a=s(2265);function SectionHead(e){return(0,l.jsx)("div",{className:"w-full flex  justify-between items-center ",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h6",{className:"text-black-500 font-bold",children:e.title}),e.desc&&(0,l.jsx)("p",{className:"text-black-300 font-light text-sm",children:e.desc})]})})}var r=s(6691),n=s.n(r),i=s(261),sideBar=function(){return(0,l.jsxs)("div",{children:[(0,l.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css"}),(0,l.jsx)("div",{className:"min-h-screen flex flex-row ",children:(0,l.jsxs)("div",{className:"flex flex-col w-56 bg-white overflow-hidden",children:[(0,l.jsx)("div",{className:"flex justify-center mt-8",children:(0,l.jsx)(n(),{src:i.Z,height:150,width:150,alt:"logo"})}),(0,l.jsxs)("ul",{className:"flex flex-col py-6",children:[(0,l.jsx)("li",{children:(0,l.jsxs)("a",{href:"#",className:"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800",children:[(0,l.jsx)("span",{className:"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400",children:(0,l.jsx)("i",{className:"bx bx-home"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Dashboard"})]})}),(0,l.jsx)("li",{children:(0,l.jsxs)("a",{href:"#",className:"flex flex-row items-center h-12 transform hover:translate-x-2 transition-transform ease-in duration-200 text-gray-500 hover:text-gray-800",children:[(0,l.jsx)("span",{className:"inline-flex items-center justify-center h-12 w-12 text-lg text-gray-400",children:(0,l.jsx)("i",{className:"bx bx-log-out"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Logout"})]})})]})]})})]})};let c=[{title:"Fuerte",fruitNumber:0},{title:"Jumbo",fruitNumber:0},{title:"Hassa",fruitNumber:0}];var o=s(1247);let CustomError=class CustomError extends Error{constructor(e){super(e.message),this.name="CustomError",this.response=e,Object.setPrototypeOf(this,CustomError.prototype)}};var d=s(9984);function authHeader(){let e=localStorage.getItem("accessToken");return null!==e?{Authorization:"Bearer ".concat(JSON.parse(e))}:{}}let get_farmers=async e=>{let{page:t,size:s}=e;try{let e="page=".concat(null!=t?t:1,"&limit=").concat(null!=s?s:5),l=await d.o.get("/farmers/paginated?".concat(e),{headers:authHeader()});return l.data}catch(e){throw new CustomError(e)}},get_all_farmers=async()=>{try{let e=await d.o.get("/farmers/list",{headers:authHeader()});return e.data}catch(e){throw new CustomError(e)}},u=["#5160B3","#000000","#2CA900","#D29539"];var fruitRecords=function(e){let{farmers:t,setFarmers:s}=(0,o.xq)();return(0,l.jsx)("div",{className:"flex items-center mb-4 p-3 min-w-[250px] gap-4 border cursor-pointer rounded-lg shadow-sm",children:(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("p",{className:"text-gray-400",children:e.title}),(0,l.jsx)("h1",{className:"font-bold text-2xl",style:{color:u[Math.floor(Math.random()*u.length)]},children:"".concat(e.fruitNumber)})]})})},m=s(230),x=s(4033);let buildQueryString=e=>{let t=[];for(let[s,l]of Object.entries(e))if(null!=l){if("string"==typeof l&&""===l.trim())continue;t.push("".concat(s,"=").concat(encodeURIComponent(l)))}return t.join("&")};var h=s(802);function _templateObject(){let e=(0,m._)(["\n  background-color: #1d5fad;\n  border-radius: 4px;\n  border: none;\n  color: white;\n  padding: 0.2rem 0.5rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  &:hover {\n    background: #3b82f6;\n  }\n"]);return _templateObject=function(){return e},e}let f=h.ZP.button(_templateObject()),DataTable=e=>{let{columns:t,data:s,isLoading:r=!1,getData:n,first:i,last:c,pageNumber:o,totalElements:d,totalPages:u,otherParams:m,pageTracker:h}=e;(0,x.useRouter)();let p=new URLSearchParams,[g,b]=(0,a.useState)(!1),[j,N]=(0,a.useState)(Number(p.get("page"))||0),[v,w]=(0,a.useState)([]),y=((e,t)=>{let s=e-3,l=e+3+1,a=[];return(a=Array.from({length:t},(e,t)=>t).filter(e=>e&&e>=s&&e<l)).length>1&&(a[0]>1&&(a[0]>2&&a.unshift("..."),a.unshift(1)),a[a.length-1]<t&&(a[a.length-1]!==t-1&&a.push("..."),a.push(t))),a})(j,u),[S,A]=(0,a.useState)({pageNumber:p.get("page")?Number(p.get("page")):0,pageSize:p.get("size")?Number(p.get("size")):5}),updateQueryParams=e=>{buildQueryString({page:e.pageNumber.toString(),limit:e.pageSize.toString(),...m})};function onPageSizeChange(e){A(t=>({...t,pageSize:Number(e.target.value),pageNumber:0}))}function onClickNextPage(){N(j+1),A(e=>({...e,pageNumber:o+1}))}function onClickPreviousPage(){N(j-1),A(e=>({...e,pageNumber:o-1}))}let handleClick=e=>{N(e-1),A(t=>({...t,pageNumber:e-1}))};return(0,a.useEffect)(()=>{updateQueryParams({pageNumber:S.pageNumber,pageSize:S.pageSize}),n&&n({size:S.pageSize,page:S.pageNumber,...m})},[S,m]),(0,a.useEffect)(()=>{N(0),A(e=>({...e,pageNumber:0}))},[h]),(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsx)("div",{style:{width:"100%",overflowX:"scroll",minHeight:"10rem",minWidth:"100%"},className:"sm-transfers-table-container overflow-x-auto",children:(0,l.jsxs)("table",{className:"sm-transfers-table mt-8",children:[(0,l.jsx)("thead",{className:"rounded-sm bg-[#64748B] bg-opacity-10"}),(0,l.jsxs)("tbody",{className:"",children:[(0,l.jsxs)("tr",{className:"",children:[r&&(0,l.jsx)("td",{colSpan:t.length+2,className:"text-light px-2 py-3 text-center text-sm font-normal",children:"One moment please ..."}),!r&&(null==s?void 0:s.length)===0&&(0,l.jsx)("td",{colSpan:t.length+2,className:"text-light px-2 py-3 text-center text-sm font-normal",children:"No data found"})]}),!r&&(null==s?void 0:s.map((e,s)=>(0,l.jsxs)("tr",{className:"",children:[(0,l.jsx)("td",{children:S.pageSize*(o+1)-S.pageSize+s+1}),t.filter(e=>!e.omit).map((t,a)=>(0,l.jsx)("td",{children:t.cell(e,s)},a))]},s)))]})]})}),!r&&(0,l.jsxs)("div",{className:"table-pagination py-2 min-w-full overflow-auto flex justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsxs)("span",{className:"disabled min-w-20 cursor-pointer rounded-md bg-slate-500 p-2 text-slate-100  duration-100 disabled:cursor-default",children:[s.length?S.pageSize*(o+1)-S.pageSize+1:0," ","-"," ",s.length?S.pageSize*(o+1)-S.pageSize+s.length:0," ","of ",isNaN(d)?0:d]}),(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)("label",{className:"",children:"Rows/Page"}),(0,l.jsxs)("select",{className:"text-dark block w-20 appearance-none rounded-md border-0 bg-slate-100 px-3 text-base font-medium capitalize placeholder-gray-500 focus:outline-none focus:ring-0 disabled:bg-slate-500 disabled:text-slate-100",onChange:onPageSizeChange,value:S.pageSize,disabled:d<=5,children:[(0,l.jsx)("option",{value:"5",children:"5"}),(0,l.jsx)("option",{value:"10",children:"10"}),(0,l.jsx)("option",{value:"25",children:"25"}),(0,l.jsx)("option",{value:"50",children:"50"}),(0,l.jsx)("option",{value:"100",children:"100"})]})]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:y.map((e,t)=>"..."===e?(0,l.jsx)("p",{className:"mx-1 flex items-center",children:e},t):(0,l.jsx)("div",{className:"pagination-item ".concat(j+1===e&&"active"),onClick:()=>{handleClick(e)},children:(0,l.jsx)("p",{children:e})},t))}),(0,l.jsxs)("div",{className:"flex gap-1 text-sm",children:[(0,l.jsx)(f,{disabled:i,onClick:onClickPreviousPage,children:"Previous"}),(0,l.jsx)(f,{disabled:c,onClick:onClickNextPage,children:"Next"})]})]})]})};var p=s(8613),g=s(9546),b=s.n(g);s(930),s(9567);var excelPdfExport=e=>{let{excelData:t,fileName:s}=e,exportToExcel=async e=>{let s=b().utils.json_to_sheet(t),l=b().write({Sheets:{data:s},SheetNames:["data"]},{bookType:"xlsx",type:"array"}),a=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});p.saveAs(a,e+".xlsx")};return(0,l.jsx)("button",{className:"bg-green-600 text-center px-4 py-[4px] rounded-md text-white",onClick:e=>exportToExcel(s),children:"Excel Export"})},page=function(){var e,t,s,r,n;let[i,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(),{farmers:x,setFarmers:h}=(0,o.xq)(),getFarmers=async e=>{try{d(!0);let t=await get_farmers({...e});h(t.data)}catch(e){console.error(e)}finally{d(!1)}},getFarmersList=async()=>{try{let e=await get_all_farmers();m(e.data)}catch(e){console.error(e)}};return(0,a.useEffect)(()=>{getFarmersList()},[]),(0,l.jsxs)("div",{className:"w-full bg-[#00800010] flex",children:[(0,l.jsx)(sideBar,{}),(0,l.jsxs)("div",{className:"m-[20px] w-full rounded-md ",children:[(0,l.jsxs)("div",{className:" bg-white w-full  relative p-[20px] rounded-md shadow-sm shadow-neutal-300",children:[(0,l.jsx)("div",{className:"flex  z-100  items-start justify-between",children:(0,l.jsx)(SectionHead,{title:"Avocado Fruits",desc:"All Fruits available"})}),(0,l.jsx)("div",{className:"flex gap-4 my-[20px] overflow-x-scroll scrollable",children:c.map((e,t)=>(0,a.createElement)(fruitRecords,{...e,key:t}))})]}),(0,l.jsx)("div",{className:" bg-white p-[20px] rounded-md shadow-sm shadow-neutal-300 mt-2",children:(0,l.jsxs)("div",{className:"items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(SectionHead,{title:"Farmer's table",desc:"More Details about the Farmers"}),(0,l.jsx)(excelPdfExport,{excelData:u,fileName:"farmers"})]}),(0,l.jsx)(DataTable,{columns:[{title:"Farmer's Name",cell:e=>(0,l.jsx)("div",{children:"".concat(e.surname," ").concat(e.otherNames)})},{title:"Phone Number",cell:e=>(0,l.jsx)("p",{children:e.phoneNumber})},{title:"District",cell:e=>(0,l.jsx)("p",{children:e.district})},{title:"Sector",cell:e=>(0,l.jsx)("p",{children:e.sector})},{title:"Village",cell:e=>(0,l.jsx)("p",{children:e.village})},{title:"Fuerte Trees",cell:e=>(0,l.jsx)("p",{children:e.jumboTrees})},{title:"Fuerte Trees Age",cell:e=>(0,l.jsx)("p",{children:e.jumboTreesAge})},{title:"Jumbo Trees",cell:e=>(0,l.jsx)("p",{children:e.jumboTrees})},{title:"Jumbo Trees Age",cell:e=>(0,l.jsx)("p",{children:e.jumboTreesAge})},{title:"Hass Trees",cell:e=>(0,l.jsx)("p",{children:e.jumboTrees})},{title:"Hass Trees Age",cell:e=>(0,l.jsx)("p",{children:e.jumboTreesAge})},{title:"Registration Date",cell:e=>(0,l.jsx)("p",{children:e.registrationDate})},{title:"Farm Size",cell:e=>(0,l.jsx)("p",{children:e.farmSize})},{title:"Farmer Code",cell:e=>(0,l.jsx)("p",{children:e.farmerCode})}],getData:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:0,size:10};getFarmers(e).catch(e=>{console.error(e)})},isLoading:i,data:null!==(e=null==x?void 0:x.content)&&void 0!==e?e:[],first:null===(t=null==x?void 0:x.first)||void 0===t||t,last:null===(s=null==x?void 0:x.last)||void 0===s||s,pageNumber:null!==(r=null==x?void 0:x.number)&&void 0!==r?r:0,totalElements:0,totalPages:null!==(n=null==x?void 0:x.totalPages)&&void 0!==n?n:0})]})})]})]})}},261:function(e,t){"use strict";t.Z={src:"/_next/static/media/afropurelogo.e49b8f02.png",height:130,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAAQUlEQVR4nA3KMQ6AIBBE0b8sFzBaeP+DWWtnMSFIWJD+2dA96QVLTonEI3FsJxEdzLDxXgvUBQy1hvLOV8UE3DM/8McbczXVE5oAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}}},function(e){e.O(0,[691,514,591,505,236,360,971,472,744],function(){return e(e.s=7563)}),_N_E=e.O()}]);